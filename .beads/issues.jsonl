{"id":"phlo-0xu","title":"Create services/api/ with postgrest, hasura, fastapi service.yaml","description":"API layer services. Move existing fastapi code to services/api/fastapi/","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T22:11:57.241715Z","updated_at":"2025-12-08T22:20:48.758629Z","closed_at":"2025-12-08T22:20:48.758629Z","dependencies":[{"issue_id":"phlo-0xu","depends_on_id":"phlo-db5","type":"blocks","created_at":"2025-12-08T22:12:25.004144Z","created_by":"daemon"},{"issue_id":"phlo-0xu","depends_on_id":"phlo-phy","type":"parent-child","created_at":"2025-12-08T22:12:42.123287Z","created_by":"daemon"}]}
{"id":"phlo-13a","title":"Observatory: Table browser improvements","description":"Search/filter in sidebar table list, faster loading, better grouping by schema/layer, and virtualized list.","design":"Scope\n- Improve the Data Explorer table browser flow: fast search/filter for catalog/schema/table, clear empty/loading states, and consistent navigation.\n- The table details view should show: columns (name/type/nullability), partitioning columns (if any), freshness/materialization metadata, and a preview query with safe limits.\n- Use the shared TanStack Table components from phlo-4su once available.\n- Integrate with metadata caching (phlo-b1w) to avoid repeated introspection queries.","acceptance_criteria":"Done when\n- Tables can be discovered via search and via browsing; navigation is consistent.\n- Selecting a table reliably loads its metadata and a preview sample.\n- The UI clearly distinguishes: no data vs not materialized vs permissions/connection error.\n- No repeated expensive introspection calls during normal navigation (validated via logs).","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-13T00:22:28.81219Z","updated_at":"2025-12-17T09:30:52.349646Z","closed_at":"2025-12-17T09:30:52.349646Z","dependencies":[{"issue_id":"phlo-13a","depends_on_id":"phlo-4su","type":"blocks","created_at":"2025-12-13T00:22:41.482216Z","created_by":"daemon"},{"issue_id":"phlo-13a","depends_on_id":"phlo-emz","type":"parent-child","created_at":"2025-12-13T00:37:40.622989Z","created_by":"daemon"}]}
{"id":"phlo-13h","title":"Test new service architecture with github-stats example","description":"Verify phlo services init/start/stop work correctly with new plugin-based architecture","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T22:12:13.342806Z","updated_at":"2025-12-09T06:13:45.005182Z","closed_at":"2025-12-09T06:13:45.005182Z","dependencies":[{"issue_id":"phlo-13h","depends_on_id":"phlo-9y0","type":"blocks","created_at":"2025-12-08T22:12:33.292631Z","created_by":"daemon"},{"issue_id":"phlo-13h","depends_on_id":"phlo-phy","type":"parent-child","created_at":"2025-12-08T22:12:42.578568Z","created_by":"daemon"}]}
{"id":"phlo-1p9","title":"Add visual diff view between pipeline stages","description":"Show what changed between upstream and downstream data to make the journey more insightful.\n\nFEATURES:\n\n1. COLUMN DIFF:\n   - Side-by-side: upstream columns → downstream columns\n   - Highlight: added, removed, renamed, transformed columns\n   - Show transformation applied (e.g., 'DATE(created_at) → activity_date')\n\n2. VALUE DIFF:\n   - For 1:1 transforms, show before/after values\n   - Highlight changes: nulls filled, types converted, values computed\n   - e.g., 'created_at: 2024-01-01T10:30:00Z → activity_date: 2024-01-01'\n\n3. SCHEMA EVOLUTION:\n   - Compare column counts and types\n   - Show data reduction (10 cols → 5 cols)\n   - Show enrichment (join added 3 columns)\n\n4. AGGREGATE EXPLANATION:\n   - For GROUP BY transforms, show:\n     - Grouped by: [activity_date]\n     - Aggregated: COUNT(*) → total_events\n     - Source rows: ~150 rows → 1 row\n\n5. QUALITY ANNOTATIONS:\n   - Show if quality checks ran between stages\n   - Highlight rows that would fail checks\n\nFILES:\n- src/components/data/StageDiff.tsx (new component)\n- src/components/data/RowJourney.tsx (integrate diff view)","design":"Scope\n- Add a visual diff view that compares the same logical entity across pipeline stages (bronze vs silver vs gold) for a given partition.\n- Inputs: stage A asset, stage B asset, primary key (or inferred key), and partition date.\n- Compute diff server-side: join on key, return added/removed/changed columns, and a small sample of changed rows.\n- UI shows side-by-side rows with per-column highlights and links to contributing rows.","acceptance_criteria":"Done when\n- A user can pick two stages for an entity and see a clear diff.\n- Changed columns are highlighted; missing/added rows are represented.\n- Works for at least one GitHub table with an obvious key.\n- Diff view integrates with shareable URLs (phlo-5rf).","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-09T22:59:12.147735Z","updated_at":"2025-12-18T17:47:46.108185Z","closed_at":"2025-12-18T17:47:46.108185Z","dependencies":[{"issue_id":"phlo-1p9","depends_on_id":"phlo-ecv","type":"blocks","created_at":"2025-12-09T22:59:16.583506Z","created_by":"daemon"}]}
{"id":"phlo-2m5","title":"Remove Load Preview button - auto-load on table select","description":"Issue #1: Clicking a table in the sidebar should auto-load its preview data. The 'Load Preview' button is unnecessary friction.\n\nACTION: In DataPreview.tsx, add useEffect that triggers loadData(0) when the table prop changes, instead of showing the button.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T22:54:47.652096Z","updated_at":"2025-12-09T23:06:59.651869Z","closed_at":"2025-12-09T23:06:59.651869Z"}
{"id":"phlo-2md","title":"Docs/examples: Add phlo.quality reconciliation checks (GitHub)","description":"Add a GitHub example showing phlo.quality used for warehouse-native reconciliation/aggregate consistency checks (e.g., stg vs fct rowcount per partition; fct_daily metrics match contributing rows).","design":"Scope\n- Add an examples/docs walkthrough showing how to use phlo.quality for reconciliation checks on the GitHub pipeline.\n- Focus on partitioned checks (by day): row count parity, uniqueness of keys, not-null of critical fields, and freshness.\n- Document how these checks surface in Dagster as asset checks and how to debug failures (link to contributing rows SQL).","acceptance_criteria":"Done when\n- The GitHub example includes at least 2 phlo.quality checks that are partition-aware.\n- Running the example produces Dagster asset checks (visible in UI).\n- Docs include a short debugging workflow for a failing check.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T00:37:10.120896Z","updated_at":"2025-12-19T23:19:04.269004Z","closed_at":"2025-12-19T23:19:04.269004Z","dependencies":[{"issue_id":"phlo-2md","depends_on_id":"phlo-emz","type":"parent-child","created_at":"2025-12-13T00:37:40.332645Z","created_by":"daemon"}]}
{"id":"phlo-4r8","title":"Implement 'phlo services remove \u003cname\u003e' command","description":"Remove a service from lakehouse .phlo/ directory","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T22:12:06.743235Z","updated_at":"2025-12-09T06:15:34.468389Z","closed_at":"2025-12-09T06:15:34.468389Z","dependencies":[{"issue_id":"phlo-4r8","depends_on_id":"phlo-6qm","type":"blocks","created_at":"2025-12-08T22:12:33.240902Z","created_by":"daemon"},{"issue_id":"phlo-4r8","depends_on_id":"phlo-phy","type":"parent-child","created_at":"2025-12-08T22:12:42.529904Z","created_by":"daemon"}]}
{"id":"phlo-4su","title":"Observatory: TanStack Table migration","description":"Migrate DataPreview, QueryResults, and column tables to TanStack Table for virtualization, sorting, filtering, column pin/resize, and keyboard nav.","design":"Approach\n- Use tanstack react-table as the single table engine for DataPreview, QueryResults, and any column/value tables.\n- Use tanstack react-virtual (or equivalent) for row virtualization; keep existing server-side pagination for very large result sets.\n- Implement a shared table wrapper component that takes: column definitions (with types + formatting), row data, row id getter, and feature flags (sorting/filtering/pinning/resize).\n- Keep shadcn primitives for styling, menus, and inputs; keep existing cell renderers (SQL links, null badges, timestamps).\n- Ensure keyboard navigation and accessibility work with virtualization.","acceptance_criteria":"Done when\n- DataPreview and QueryResults no longer use the old table implementation.\n- Sorting and column resizing work; column pinning works for key columns.\n- Virtualized rendering stays responsive at 50k+ rows (manual smoke test).\n- Existing cell rendering behaviors remain (timestamps, nulls, links).\n- No regressions in server query execution or result pagination.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-13T00:22:28.129778Z","updated_at":"2025-12-14T23:27:39.536202Z","closed_at":"2025-12-14T23:27:39.536202Z","dependencies":[{"issue_id":"phlo-4su","depends_on_id":"phlo-bms","type":"blocks","created_at":"2025-12-13T00:22:40.983146Z","created_by":"daemon"},{"issue_id":"phlo-4su","depends_on_id":"phlo-emz","type":"parent-child","created_at":"2025-12-13T00:37:40.565028Z","created_by":"daemon"}]}
{"id":"phlo-4ut","title":"Quality: Failure row sampling + SQL links","description":"Standardize how failures expose a small sample and generate a safe SQL query to reproduce in Trino.","design":"Standardize failure drilldown across check sources.\n\n- Provide a small sample payload (\u003c=20) and a safe SELECT query to reproduce in Trino.\n- Prefer IDs/partition filters over full row dumps when rows are wide.\n- Avoid leaking secrets.\n\nOut of scope: full interactive diff (handled by phlo-1p9).","acceptance_criteria":"- Pandera and dbt checks expose sample + reproducible SQL link consistently.\n- Observatory can render the sample and open query in SQL tab.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T00:35:00.927548Z","updated_at":"2025-12-13T23:04:27.420607Z","closed_at":"2025-12-13T23:04:27.420607Z","dependencies":[{"issue_id":"phlo-4ut","depends_on_id":"phlo-emz","type":"parent-child","created_at":"2025-12-13T00:37:40.267088Z","created_by":"daemon"}]}
{"id":"phlo-4wx","title":"Create services/core/ with service.yaml for postgres, minio, nessie, trino, dagster","description":"Core services always installed. Include Dockerfile and templates for dagster, catalog config for trino.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T22:11:44.330416Z","updated_at":"2025-12-08T22:18:43.543786Z","closed_at":"2025-12-08T22:18:43.543786Z","dependencies":[{"issue_id":"phlo-4wx","depends_on_id":"phlo-db5","type":"blocks","created_at":"2025-12-08T22:12:24.900011Z","created_by":"daemon"},{"issue_id":"phlo-4wx","depends_on_id":"phlo-phy","type":"parent-child","created_at":"2025-12-08T22:12:42.023022Z","created_by":"daemon"}]}
{"id":"phlo-504","title":"Observatory: Contributing rows inline (not just SQL)","description":"In RowJourney, fetch and render contributing rows inline with pagination/sampling; keep 'open in SQL' as fallback.","design":"Scope\n- Extend the UI so contributing rows can be viewed inline (table) in addition to showing only the SQL.\n- Add a side panel/drawer opened from a cell/row action: shows contributing rows table, row count/sampling info, and the generating SQL.\n- Use shared TanStack Table components (phlo-4su) for virtualization and column interactions.\n- Provide export options (copy to clipboard / download CSV) within enforced limits.","acceptance_criteria":"Done when\n- From a gold row (or cell), a user can open an inline contributing rows viewer.\n- Viewer supports pagination/sampling and clearly communicates limits.\n- The underlying SQL is still available for debugging.\n- Performance remains acceptable for large contributing-row sets via pagination.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-13T00:22:28.475878Z","updated_at":"2025-12-16T22:58:15.82788Z","closed_at":"2025-12-16T22:58:15.82788Z","dependencies":[{"issue_id":"phlo-504","depends_on_id":"phlo-rml","type":"blocks","created_at":"2025-12-13T00:22:41.230384Z","created_by":"daemon"},{"issue_id":"phlo-504","depends_on_id":"phlo-4su","type":"blocks","created_at":"2025-12-13T00:22:41.294434Z","created_by":"daemon"},{"issue_id":"phlo-504","depends_on_id":"phlo-emz","type":"parent-child","created_at":"2025-12-13T00:37:40.739944Z","created_by":"daemon"}]}
{"id":"phlo-5m2","title":"Remove legacy root docker-compose.yml and .env","description":"Remove broken framework-dev files with hardcoded credentials","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T22:11:37.109884Z","updated_at":"2025-12-08T22:14:44.855061Z","closed_at":"2025-12-08T22:14:44.855061Z","dependencies":[{"issue_id":"phlo-5m2","depends_on_id":"phlo-phy","type":"parent-child","created_at":"2025-12-08T22:12:41.866931Z","created_by":"daemon"}]}
{"id":"phlo-5rf","title":"Observatory: Bookmarks + shareable URLs","description":"Deep-link URLs for table/query/selected row/journey node; add bookmarks list.","design":"Scope\n- Implement shareable URLs and bookmarks for key Observatory screens (table explorer, query results, contributing rows).\n- URL should fully encode navigation state: connection, catalog, schema, table, selected columns, filters, sort, partition date, and (if applicable) a saved query id.\n- Provide a bookmarks surface (sidebar or user menu) backed by server-side storage.\n- Keep URLs stable across releases by versioning the encoded state.","acceptance_criteria":"Done when\n- Copy/pasting the URL recreates the same view for another user in the same environment.\n- Users can bookmark a view and see it in a bookmarks list.\n- URLs do not allow executing unsafe SQL (works with phlo-8os guardrails).\n- A migration story exists for old URL versions.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-13T00:22:28.667512Z","updated_at":"2025-12-18T19:57:06.437124Z","closed_at":"2025-12-18T19:57:06.437124Z","dependencies":[{"issue_id":"phlo-5rf","depends_on_id":"phlo-npw","type":"blocks","created_at":"2025-12-13T00:22:41.42129Z","created_by":"daemon"},{"issue_id":"phlo-5rf","depends_on_id":"phlo-emz","type":"parent-child","created_at":"2025-12-13T00:37:40.858397Z","created_by":"daemon"}]}
{"id":"phlo-5ug","title":"Quality: Emit Pandera results as Dagster asset checks","description":"For  ingestion assets, surface Pandera contract validation as Dagster Asset Checks (partition-scoped). Include row counts, failure summary, and small sample. Blocking by default for contract failures.","design":"Emit Pandera validation as Dagster Asset Checks for ingestion assets.\n\nImplementation notes:\n- Attach checks to the actual dlt asset keys (AssetKey([\"dlt_\u003ctable\u003e\"])).\n- Partition-scoped using _phlo_partition_date.\n- Metadata includes counts + failure summary + sample failing rows/ids.\n- Contract failures block by default.\n\nOut of scope: rewriting Pandera schemas; this is surfacing existing validation.","acceptance_criteria":"- For GitHub example, dlt_user_events/dlt_user_repos/dlt_user_profile show Pandera contract checks in Dagster.\n- Checks are partition-scoped and include required metadata (phlo-ma0).\n- Failing Pandera validation results in failing asset check with useful metadata.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-13T00:35:00.357349Z","updated_at":"2025-12-14T10:55:54.816821Z","closed_at":"2025-12-14T10:55:54.816821Z","dependencies":[{"issue_id":"phlo-5ug","depends_on_id":"phlo-ma0","type":"blocks","created_at":"2025-12-13T00:35:07.952701Z","created_by":"daemon"},{"issue_id":"phlo-5ug","depends_on_id":"phlo-z43","type":"blocks","created_at":"2025-12-13T00:35:08.012281Z","created_by":"daemon"},{"issue_id":"phlo-5ug","depends_on_id":"phlo-ps2","type":"blocks","created_at":"2025-12-13T00:35:08.06949Z","created_by":"daemon"},{"issue_id":"phlo-5ug","depends_on_id":"phlo-emz","type":"parent-child","created_at":"2025-12-13T00:37:39.836398Z","created_by":"daemon"}]}
{"id":"phlo-6mz","title":"Epic: Observatory Production Readiness","description":"Parent epic for final production polish. Includes: authentication, responsive design, real-time updates, and performance monitoring.","design":"Scope\n- Authentication: environment-level authn/authz for protecting Observatory and saved artifacts.\n- Responsive design: mobile-friendly layout with proper breakpoints.\n- Real-time updates: polling or SSE for materialization and check status.\n- Performance monitoring: budgets, logging, and basic metrics.\n\nAcceptance Criteria:\n- Auth is enabled and protects all endpoints and saved artifacts.\n- UI is usable on tablets and mobile devices.\n- Materialization status updates in real-time without manual refresh.\n- Key pages have performance budgets and logs/metrics.","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-19T23:21:06.948681Z","updated_at":"2025-12-20T10:41:06.265795Z","closed_at":"2025-12-20T10:41:06.265795Z"}
{"id":"phlo-6qm","title":"Create src/phlo/services/ discovery module","description":"Module to discover and load service.yaml files from services/ directory. Parse YAML, validate schema, resolve dependencies.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T22:12:06.474015Z","updated_at":"2025-12-08T22:22:22.419211Z","closed_at":"2025-12-08T22:22:22.419211Z","dependencies":[{"issue_id":"phlo-6qm","depends_on_id":"phlo-db5","type":"blocks","created_at":"2025-12-08T22:12:25.224801Z","created_by":"daemon"},{"issue_id":"phlo-6qm","depends_on_id":"phlo-phy","type":"parent-child","created_at":"2025-12-08T22:12:42.325854Z","created_by":"daemon"}]}
{"id":"phlo-6z8","title":"Add enable/disable service functionality","description":"Server actions to start/stop Docker containers via docker compose up/down for individual services","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-10T07:49:22.301239Z","updated_at":"2025-12-10T07:55:11.361009Z","closed_at":"2025-12-10T07:55:11.361009Z","dependencies":[{"issue_id":"phlo-6z8","depends_on_id":"phlo-xxr","type":"blocks","created_at":"2025-12-10T07:49:54.117121Z","created_by":"daemon"}]}
{"id":"phlo-6zp","title":"CLI: Add 'phlo services restart' command to simplify stop/start cycle","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T16:52:51.692864Z","updated_at":"2025-12-21T17:43:28.742483Z","closed_at":"2025-12-21T17:43:28.742483Z"}
{"id":"phlo-84h","title":"Create services/admin/pgweb/ with service.yaml","description":"Database admin tool","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T22:11:57.443209Z","updated_at":"2025-12-08T22:19:17.984781Z","closed_at":"2025-12-08T22:19:17.984781Z","dependencies":[{"issue_id":"phlo-84h","depends_on_id":"phlo-db5","type":"blocks","created_at":"2025-12-08T22:12:25.17375Z","created_by":"daemon"},{"issue_id":"phlo-84h","depends_on_id":"phlo-phy","type":"parent-child","created_at":"2025-12-08T22:12:42.274577Z","created_by":"daemon"}]}
{"id":"phlo-8a4","title":"Remove legacy services/dagster/","description":"Remove dagster config with hardcoded lake/lakepass credentials","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T22:11:37.175504Z","updated_at":"2025-12-08T22:16:40.242074Z","closed_at":"2025-12-08T22:16:40.242074Z","dependencies":[{"issue_id":"phlo-8a4","depends_on_id":"phlo-phy","type":"parent-child","created_at":"2025-12-08T22:12:41.91792Z","created_by":"daemon"}]}
{"id":"phlo-8aw","title":"Observatory: Command palette (global search)","description":"Cmd+K global search across assets/tables/columns/runs with filters (layer/branch/tags). Jump actions: open asset, open table, open lineage, open SQL template.","design":"Cmd+K command palette.\n\nIndex:\n- Assets (Dagster), tables (Iceberg), columns (from table schema), recent runs.\n\nActions:\n- Open Asset page\n- Open Data Explorer table\n- Open lineage graph focused\n- Insert SQL template (SELECT * FROM ...)\n\nOut of scope: fuzzy search across row data.","acceptance_criteria":"- Cmd+K opens palette globally.\n- Search returns assets and tables quickly (debounced, cached).\n- Selecting an item navigates correctly to destination.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-13T00:22:27.957253Z","updated_at":"2025-12-17T00:32:42.606398Z","closed_at":"2025-12-17T00:32:42.606398Z","dependencies":[{"issue_id":"phlo-8aw","depends_on_id":"phlo-bms","type":"blocks","created_at":"2025-12-13T00:22:40.85964Z","created_by":"daemon"},{"issue_id":"phlo-8aw","depends_on_id":"phlo-emz","type":"parent-child","created_at":"2025-12-13T00:37:40.508567Z","created_by":"daemon"}]}
{"id":"phlo-8dl","title":"Epic: Observatory","description":"Top-level epic for Observatory. Tracks phased delivery (Phases 0-5) plus cross-cutting UX/quality work and supporting features.","design":"Definition\n- This epic is complete when the phased roadmap (mne, 8i3, qqm, lsd, eh7, ydl) and cross-cutting UX/quality work (emz + children) are delivered.\n- Each phase should ship as a coherent slice that can be used end-to-end in dev and in the docker stack.\n- Prefer a small number of high-quality primitives (query runner, table renderer, lineage model, checks model) reused across the UI.","acceptance_criteria":"Done when\n- All child issues are closed (or explicitly descoped and replaced).\n- Observatory can be used to: browse data, view lineage, inspect quality, and navigate contributing rows.\n- Performance and safety requirements are met (query guardrails, caching, paging/virtualization).\n- Documentation exists for core workflows and debugging.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-13T00:38:54.29894Z","updated_at":"2025-12-20T10:41:06.269437Z","closed_at":"2025-12-20T10:41:06.269437Z"}
{"id":"phlo-8i3","title":"Observatory: Phase 1 - Foundation","description":"TanStack Start scaffold with basic data display. Includes: project setup with routing, server functions for Dagster/Nessie integration, Dashboard, Asset List, Asset Detail pages, Docker integration. See specs/PHLO_OBSERVATORY_PLAN.md Phase 1.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-07T23:40:57.449811Z","updated_at":"2025-12-08T12:30:20.081837Z","closed_at":"2025-12-08T12:30:20.081837Z","dependencies":[{"issue_id":"phlo-8i3","depends_on_id":"phlo-mne","type":"blocks","created_at":"2025-12-07T23:44:09.455236Z","created_by":"daemon"},{"issue_id":"phlo-8i3","depends_on_id":"phlo-8dl","type":"parent-child","created_at":"2025-12-13T00:39:01.274005Z","created_by":"daemon"}]}
{"id":"phlo-8i3.1","title":"Create /assets route with asset list","description":"Asset list page showing all Dagster assets. Includes search/filter, asset type/layer badges, last materialization time. Uses TanStack Table for virtualized list.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T12:21:35.979523Z","updated_at":"2025-12-08T12:29:45.017465Z","closed_at":"2025-12-08T12:29:45.017465Z","dependencies":[{"issue_id":"phlo-8i3.1","depends_on_id":"phlo-8i3","type":"parent-child","created_at":"2025-12-08T12:21:35.980448Z","created_by":"daemon"},{"issue_id":"phlo-8i3.1","depends_on_id":"phlo-8i3.4","type":"blocks","created_at":"2025-12-08T12:22:08.81381Z","created_by":"daemon"}]}
{"id":"phlo-8i3.2","title":"Create /assets/:id route with asset detail","description":"Asset detail page with schema view, basic metrics (row count, size, freshness), and lineage preview. Tabs for Overview, Schema, Quality (placeholder).","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T12:21:38.596476Z","updated_at":"2025-12-08T12:29:45.0668Z","closed_at":"2025-12-08T12:29:45.0668Z","dependencies":[{"issue_id":"phlo-8i3.2","depends_on_id":"phlo-8i3","type":"parent-child","created_at":"2025-12-08T12:21:38.598513Z","created_by":"daemon"},{"issue_id":"phlo-8i3.2","depends_on_id":"phlo-8i3.1","type":"blocks","created_at":"2025-12-08T12:22:08.967581Z","created_by":"daemon"}]}
{"id":"phlo-8i3.3","title":"Create nessie.server.ts for branch operations","description":"Nessie REST client server functions: getBranches(), getCurrentBranch(), getCommits(). Enables branch selector in header for future Phase 3.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T12:21:41.410207Z","updated_at":"2025-12-09T08:15:43.971646Z","closed_at":"2025-12-09T08:15:43.971646Z","dependencies":[{"issue_id":"phlo-8i3.3","depends_on_id":"phlo-8i3","type":"parent-child","created_at":"2025-12-08T12:21:41.411083Z","created_by":"daemon"}]}
{"id":"phlo-8i3.4","title":"Expand dagster.server.ts with asset queries","description":"Add getAssets() for list view and getAssetDetails(key) for detail view. Query asset metadata, schema, materializations from Dagster GraphQL.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T12:21:41.855738Z","updated_at":"2025-12-08T12:25:32.482984Z","closed_at":"2025-12-08T12:25:32.482984Z","dependencies":[{"issue_id":"phlo-8i3.4","depends_on_id":"phlo-8i3","type":"parent-child","created_at":"2025-12-08T12:21:41.858425Z","created_by":"daemon"}]}
{"id":"phlo-8os","title":"Observatory: Query safety guardrails","description":"Enforce read-only mode by default (block non-SELECT), show effective query, confirm dangerous statements, configurable in Settings.","design":"Approach\n- Enforce server-side query validation for the SQL runner used by Observatory.\n- Allowlist read-only statements (SELECT, SHOW, DESCRIBE, EXPLAIN) and block anything else (DDL/DML, multi-statement, semicolons-in-middle).\n- Apply default row limits when missing; cap maximum LIMIT; apply statement timeout.\n- Parameterize partition predicates where possible and avoid interpolating raw user input.\n- Emit structured errors that the UI can render (blocked vs timed out vs failed).","acceptance_criteria":"Done when\n- Any DDL/DML attempt is blocked with a clear error.\n- A SELECT without LIMIT gets a safe default limit.\n- Queries time out rather than hanging indefinitely.\n- Multi-statement input is rejected.\n- Unit tests cover allow/deny cases and limit/timeout behavior.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T00:22:28.311283Z","updated_at":"2025-12-16T20:45:23.942116Z","closed_at":"2025-12-16T20:45:23.942116Z","dependencies":[{"issue_id":"phlo-8os","depends_on_id":"phlo-npw","type":"blocks","created_at":"2025-12-13T00:22:41.046325Z","created_by":"daemon"},{"issue_id":"phlo-8os","depends_on_id":"phlo-emz","type":"parent-child","created_at":"2025-12-13T00:37:40.679459Z","created_by":"daemon"}]}
{"id":"phlo-8z5","title":"CLI: '--profile' flag should only affect profile services, not restart all running services","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T16:53:03.670938Z","updated_at":"2025-12-21T17:43:28.744808Z","closed_at":"2025-12-21T17:43:28.744808Z"}
{"id":"phlo-930","title":"Epic: Unified Plugin System with Registry","description":"Parent epic for implementing a unified plugin system with an external registry. Enables discoverability, distribution via pip, and aliased installation. Covers: ServicePlugin base class, registry JSON catalog, CLI commands (search/install/update), core plugins package, and Observatory integration.","design":"Scope\n- Extend plugin system with ServicePlugin type for Docker-based services\n- Create registry JSON catalog hosted on GitHub Pages mapping friendly names to pip packages\n- Add CLI commands: phlo plugin search/install/update wrapping pip\n- Create phlo-core-plugins package bundled as dependency\n- Integrate plugins into Observatory Hub\n\nAcceptance Criteria:\n- ServicePlugin base class exists and can wrap service.yaml definitions\n- Registry JSON file is hosted and accessible\n- phlo plugin install salesforce works (pip wrapper)\n- Core plugins are bundled with phlo package\n- Observatory shows installed plugins","acceptance_criteria":"Done when:\n- All 4 phases complete (plugin types, registry, core plugins, Observatory)\n- ADR 0030 fully implemented\n- Documentation updated\n- Example plugin created and published","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-21T23:29:20.297168Z","updated_at":"2025-12-21T23:29:20.297168Z"}
{"id":"phlo-930.1","title":"Add ServicePlugin base class to plugin system","description":"Add a new ServicePlugin base class to src/phlo/plugins/base.py that enables Docker-based infrastructure services to be distributed as pip packages.\n\nFILES TO MODIFY:\n- src/phlo/plugins/base.py\n\nIMPLEMENTATION:\n1. Add ServicePlugin class that inherits from Plugin ABC\n2. Define abstract property: service_definition -\u003e dict[str, Any]\n3. Add concrete properties: category, is_default, profile\n4. Add methods: get_compose_fragment(), get_files(), get_dependencies()\n\nThe ServicePlugin wraps the existing service.yaml schema, allowing services to be packaged as Python packages while maintaining compatibility with current service discovery.","design":"class ServicePlugin(Plugin, ABC):\n    \"\"\"Base class for service plugins.\"\"\"\n    \n    @property\n    @abstractmethod\n    def service_definition(self) -\u003e dict[str, Any]:\n        \"\"\"Return service definition (equivalent to service.yaml content).\"\"\"\n        pass\n    \n    @property\n    def category(self) -\u003e str:\n        return self.service_definition.get('category', 'custom')\n    \n    @property\n    def is_default(self) -\u003e bool:\n        return self.service_definition.get('default', False)\n    \n    @property\n    def profile(self) -\u003e str | None:\n        return self.service_definition.get('profile')\n    \n    def get_compose_fragment(self) -\u003e dict[str, Any]:\n        return self.service_definition.get('compose', {})\n    \n    def get_files(self) -\u003e list[dict[str, str]]:\n        return self.service_definition.get('files', [])\n    \n    def get_dependencies(self) -\u003e list[str]:\n        return self.service_definition.get('depends_on', [])","acceptance_criteria":"- ServicePlugin class exists in base.py\n- Inherits from Plugin ABC\n- All required abstract and concrete methods implemented\n- Type hints complete\n- Docstrings added\n- Unit tests pass","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-21T23:29:40.899837Z","updated_at":"2025-12-21T23:29:40.899837Z","dependencies":[{"issue_id":"phlo-930.1","depends_on_id":"phlo-930","type":"parent-child","created_at":"2025-12-21T23:29:40.901319Z","created_by":"daemon"}]}
{"id":"phlo-930.10","title":"Create phlo-core-plugins package structure","description":"Create packages/phlo-core-plugins/ with pyproject.toml and entry points for phlo.plugins.quality and phlo.plugins.sources.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-21T23:34:04.181037Z","updated_at":"2025-12-21T23:34:04.181037Z","dependencies":[{"issue_id":"phlo-930.10","depends_on_id":"phlo-930","type":"parent-child","created_at":"2025-12-21T23:34:04.182338Z","created_by":"daemon"}]}
{"id":"phlo-930.11","title":"Implement core quality check plugins","description":"Implement NullCheckPlugin, UniquenessPlugin, FreshnessPlugin, SchemaPlugin in packages/phlo-core-plugins/src/phlo_core/quality/.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-21T23:34:06.646524Z","updated_at":"2025-12-21T23:34:06.646524Z","dependencies":[{"issue_id":"phlo-930.11","depends_on_id":"phlo-930","type":"parent-child","created_at":"2025-12-21T23:34:06.647635Z","created_by":"daemon"}]}
{"id":"phlo-930.12","title":"Add phlo-core-plugins as phlo dependency","description":"Add phlo-core-plugins\u003e=1.0.0 to phlo pyproject.toml dependencies so core plugins are bundled with main package.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-21T23:34:07.331909Z","updated_at":"2025-12-21T23:34:07.331909Z","dependencies":[{"issue_id":"phlo-930.12","depends_on_id":"phlo-930","type":"parent-child","created_at":"2025-12-21T23:34:07.333061Z","created_by":"daemon"}]}
{"id":"phlo-930.13","title":"Observatory: Add plugins server functions","description":"Add services/observatory/src/server/plugins.server.ts with getPlugins() and getAvailablePlugins() calling phlo plugin list --json.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-21T23:34:21.22241Z","updated_at":"2025-12-21T23:34:21.22241Z","dependencies":[{"issue_id":"phlo-930.13","depends_on_id":"phlo-930","type":"parent-child","created_at":"2025-12-21T23:34:21.224738Z","created_by":"daemon"}]}
{"id":"phlo-930.14","title":"Observatory: Create Plugins page in Hub","description":"Create hub/plugins.tsx page with PluginCard components. Grid layout by type, filter support, service plugins show Docker status.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-21T23:34:23.626826Z","updated_at":"2025-12-21T23:34:23.626826Z","dependencies":[{"issue_id":"phlo-930.14","depends_on_id":"phlo-930","type":"parent-child","created_at":"2025-12-21T23:34:23.627896Z","created_by":"daemon"}]}
{"id":"phlo-930.15","title":"CLI: Add --json output to phlo plugin list","description":"Add --json flag to plugin list command in src/phlo/cli/plugin.py for machine-readable output used by Observatory.","status":"in_progress","priority":2,"issue_type":"task","created_at":"2025-12-21T23:34:24.348332Z","updated_at":"2025-12-22T13:25:13.962695Z","dependencies":[{"issue_id":"phlo-930.15","depends_on_id":"phlo-930","type":"parent-child","created_at":"2025-12-21T23:34:24.34952Z","created_by":"daemon"}]}
{"id":"phlo-930.2","title":"Register phlo.plugins.services entry point group","description":"Register the new phlo.plugins.services entry point group in the discovery module so ServicePlugin implementations can be auto-discovered.\n\nFILES TO MODIFY:\n- src/phlo/plugins/discovery.py\n\nIMPLEMENTATION:\n1. Add 'services': 'phlo.plugins.services' to ENTRY_POINT_GROUPS dict\n2. Add ServicePlugin import from base\n3. Update discovery loop to handle service plugins with correct type validation\n\nThis enables pip packages to register service plugins via pyproject.toml entry points.","acceptance_criteria":"- ENTRY_POINT_GROUPS includes 'services': 'phlo.plugins.services'\n- ServicePlugin imported in discovery.py\n- Discovery validates plugins are ServicePlugin instances\n- Unit tests cover service plugin discovery","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-21T23:29:57.189733Z","updated_at":"2025-12-21T23:29:57.189733Z","dependencies":[{"issue_id":"phlo-930.2","depends_on_id":"phlo-930","type":"parent-child","created_at":"2025-12-21T23:29:57.192785Z","created_by":"daemon"},{"issue_id":"phlo-930.2","depends_on_id":"phlo-930.1","type":"blocks","created_at":"2025-12-21T23:29:57.194282Z","created_by":"daemon"}]}
{"id":"phlo-930.3","title":"Update PluginRegistry to handle service plugins","description":"Extend PluginRegistry to store and retrieve service plugins alongside existing plugin types.\n\nFILES TO MODIFY:\n- src/phlo/plugins/registry.py\n- src/phlo/plugins/__init__.py\n\nIMPLEMENTATION:\n1. Add _services: dict[str, ServicePlugin] to PluginRegistry.__init__\n2. Add register_service(plugin, replace=False) method\n3. Add get_service(name) -\u003e ServicePlugin | None method\n4. Add list_services() -\u003e list[str] method\n5. Update list_all_plugins() to include 'services' key\n6. Update validate_plugin() to handle ServicePlugin\n7. Export ServicePlugin from __init__.py\n\nMaintain consistency with existing register_*/get_*/list_* patterns.","acceptance_criteria":"- PluginRegistry has _services dict\n- register_service(), get_service(), list_services() methods work\n- list_all_plugins() returns services\n- validate_plugin() checks ServicePlugin interface\n- ServicePlugin exported from phlo.plugins","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-21T23:30:03.905202Z","updated_at":"2025-12-21T23:30:03.905202Z","dependencies":[{"issue_id":"phlo-930.3","depends_on_id":"phlo-930","type":"parent-child","created_at":"2025-12-21T23:30:03.907514Z","created_by":"daemon"},{"issue_id":"phlo-930.3","depends_on_id":"phlo-930.1","type":"blocks","created_at":"2025-12-21T23:30:03.908976Z","created_by":"daemon"}]}
{"id":"phlo-930.4","title":"Create example ServicePlugin package","description":"Create example service plugin package in examples/phlo-plugin-example-service/ demonstrating ServicePlugin pattern with Redis or similar service.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T23:33:34.159376Z","updated_at":"2025-12-22T13:15:51.565892Z","closed_at":"2025-12-22T13:15:51.565892Z","dependencies":[{"issue_id":"phlo-930.4","depends_on_id":"phlo-930","type":"parent-child","created_at":"2025-12-21T23:33:34.160605Z","created_by":"daemon"}]}
{"id":"phlo-930.5","title":"Define registry JSON schema and hosting","description":"Create registry/plugins.json schema and .github/workflows/registry.yml for GitHub Pages hosting. Schema includes type, package, version, description, author, tags, verified fields.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T23:33:43.400682Z","updated_at":"2025-12-22T13:18:16.823017Z","closed_at":"2025-12-22T13:18:16.823017Z","dependencies":[{"issue_id":"phlo-930.5","depends_on_id":"phlo-930","type":"parent-child","created_at":"2025-12-21T23:33:43.401957Z","created_by":"daemon"}]}
{"id":"phlo-930.6","title":"Create registry client module","description":"Add src/phlo/plugins/registry_client.py with fetch_registry(), search_plugins(), get_plugin() functions. Include HTTP caching with TTL.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T23:33:46.011282Z","updated_at":"2025-12-22T13:20:32.324638Z","closed_at":"2025-12-22T13:20:32.324638Z","dependencies":[{"issue_id":"phlo-930.6","depends_on_id":"phlo-930","type":"parent-child","created_at":"2025-12-21T23:33:46.012219Z","created_by":"daemon"}]}
{"id":"phlo-930.7","title":"CLI: Add phlo plugin search command","description":"Add search command to src/phlo/cli/plugin.py that queries registry by name, type, or tags. Usage: phlo plugin search kafka","status":"in_progress","priority":2,"issue_type":"task","created_at":"2025-12-21T23:33:47.939665Z","updated_at":"2025-12-22T13:25:02.796565Z","dependencies":[{"issue_id":"phlo-930.7","depends_on_id":"phlo-930","type":"parent-child","created_at":"2025-12-21T23:33:47.941044Z","created_by":"daemon"}]}
{"id":"phlo-930.8","title":"CLI: Add phlo plugin install command","description":"Add install command that looks up package in registry and runs pip install. Usage: phlo plugin install salesforce","status":"in_progress","priority":2,"issue_type":"task","created_at":"2025-12-21T23:33:48.588135Z","updated_at":"2025-12-22T13:25:06.273005Z","dependencies":[{"issue_id":"phlo-930.8","depends_on_id":"phlo-930","type":"parent-child","created_at":"2025-12-21T23:33:48.589092Z","created_by":"daemon"}]}
{"id":"phlo-930.9","title":"CLI: Add phlo plugin update command","description":"Add update command to check registry for newer versions and pip install --upgrade. Usage: phlo plugin update","status":"in_progress","priority":2,"issue_type":"task","created_at":"2025-12-21T23:34:01.588728Z","updated_at":"2025-12-22T13:25:09.353446Z","dependencies":[{"issue_id":"phlo-930.9","depends_on_id":"phlo-930","type":"parent-child","created_at":"2025-12-21T23:34:01.59228Z","created_by":"daemon"}]}
{"id":"phlo-954","title":"Observatory: Performance monitoring and budgets","description":"Add performance monitoring, logging, and basic metrics for Observatory.","design":"Scope: Define performance budgets for key pages. Add structured logging for server functions. Basic metrics for API response times. Error tracking and reporting.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-19T23:21:45.356366Z","updated_at":"2025-12-21T11:25:37.543178Z","closed_at":"2025-12-21T11:25:37.543185Z","dependencies":[{"issue_id":"phlo-954","depends_on_id":"phlo-6mz","type":"blocks","created_at":"2025-12-19T23:21:45.357952Z","created_by":"daemon"}]}
{"id":"phlo-9hv","title":"Add service.yaml to services/observatory/","description":"Observatory already exists, just needs service.yaml definition","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T22:11:57.175709Z","updated_at":"2025-12-08T22:19:17.88878Z","closed_at":"2025-12-08T22:19:17.88878Z","dependencies":[{"issue_id":"phlo-9hv","depends_on_id":"phlo-db5","type":"blocks","created_at":"2025-12-08T22:12:24.952248Z","created_by":"daemon"},{"issue_id":"phlo-9hv","depends_on_id":"phlo-phy","type":"parent-child","created_at":"2025-12-08T22:12:42.073206Z","created_by":"daemon"}]}
{"id":"phlo-9y0","title":"Update services.py init command to use service discovery","description":"Replace embedded template strings with dynamic composition from service.yaml files","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T22:12:06.543111Z","updated_at":"2025-12-08T22:24:35.265868Z","closed_at":"2025-12-08T22:24:35.265868Z","dependencies":[{"issue_id":"phlo-9y0","depends_on_id":"phlo-6qm","type":"blocks","created_at":"2025-12-08T22:12:33.035498Z","created_by":"daemon"},{"issue_id":"phlo-9y0","depends_on_id":"phlo-4wx","type":"blocks","created_at":"2025-12-08T22:12:33.08842Z","created_by":"daemon"},{"issue_id":"phlo-9y0","depends_on_id":"phlo-phy","type":"parent-child","created_at":"2025-12-08T22:12:42.376905Z","created_by":"daemon"}]}
{"id":"phlo-b1w","title":"Observatory: Metadata caching","description":"Cache expensive Dagster GraphQL and Trino information_schema calls server-side with TTL; add refresh controls.","design":"Approach\n- Add a metadata cache layer for catalogs/schemas/tables/columns used by the Data Explorer and query UI.\n- Key cache entries by connection + catalog + schema + table.\n- Use TTL-based invalidation plus event-based invalidation when assets materialize (Dagster events).\n- Cache should store both the introspected metadata and the derived UI model (e.g., partition columns, primary keys if known).\n- Prefer keeping the cache server-side (observatory service) so clients stay thin.","acceptance_criteria":"Done when\n- Repeated navigation across the same catalog/schema/table does not re-query metadata every time.\n- Cache invalidates after a materialization that changes schema/partitions.\n- Cache failures fall back to direct introspection without breaking the UI.\n- Logging shows cache hit/miss rates.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T00:22:28.39309Z","updated_at":"2025-12-17T01:02:22.849466Z","closed_at":"2025-12-17T01:02:22.849466Z","dependencies":[{"issue_id":"phlo-b1w","depends_on_id":"phlo-emz","type":"parent-child","created_at":"2025-12-13T00:37:40.916392Z","created_by":"daemon"}]}
{"id":"phlo-bcr","title":"Fix table selection not updating preview","description":"Issue #2: Clicking one table then another doesn't update the preview. The DataPreview component keeps showing the old data.\n\nACTION: Add table name as a key to DataPreview component in index.tsx so React remounts it on table change, OR add useEffect in DataPreview to reset state and reload when table prop changes.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T22:54:57.5248Z","updated_at":"2025-12-09T23:06:59.654107Z","closed_at":"2025-12-09T23:06:59.654107Z"}
{"id":"phlo-bms","title":"Observatory: UI redesign (shadcn Lyra preset)","description":"Full redesign of the Observatory UI using shadcn/ui (new customizable preset flow) with the Lyra + neutral/amber styling, Lucide icons, and JetBrains Mono typography.\n\nNo in-app theming/density customization: the UI ships with a single design system.","design":"Implementation workflow:\n- Generate the shadcn preset scaffold in tmp/ via `npx shadcn@latest create --preset ... --template start` and copy the relevant artifacts into `services/observatory/`.\n- Adopt shadcn components broadly (layout, navigation, cards, forms, menus, dialogs).\n- Replace the current bespoke Tailwind styling with the Lyra preset tokens in `src/styles.css` and shadcn utilities (`cn`, CVA).\n\nNon-goals:\n- User-configurable colors, theme palettes, or density controls.","acceptance_criteria":"- Observatory has a cohesive Lyra/amber redesign across all main routes (Dashboard, Hub, Data Explorer, Assets, Lineage Graph, Branches, Quality).\n- `services/observatory/src/styles.css` uses the shadcn preset CSS variables and JetBrains Mono variable font.\n- Core UI primitives are shadcn-based (buttons, menus, dialogs, tabs, inputs), not ad-hoc Tailwind blocks.\n- No UI for user customization of palettes/density; styling is fixed to the design system.\n- Existing navigation and routing still work (no broken routes).","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-13T00:22:14.393619Z","updated_at":"2025-12-14T17:35:22.961867Z","closed_at":"2025-12-14T17:35:22.961867Z","dependencies":[{"issue_id":"phlo-bms","depends_on_id":"phlo-emz","type":"parent-child","created_at":"2025-12-13T00:37:40.392107Z","created_by":"daemon"}]}
{"id":"phlo-c2a","title":"Create Hub route and ServiceCard component","description":"Create /hub route with grid of ServiceCard components showing name, description, status, actions, and credentials","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-10T07:49:20.441505Z","updated_at":"2025-12-10T07:55:10.795853Z","closed_at":"2025-12-10T07:55:10.795853Z","dependencies":[{"issue_id":"phlo-c2a","depends_on_id":"phlo-xxr","type":"blocks","created_at":"2025-12-10T07:49:52.435366Z","created_by":"daemon"},{"issue_id":"phlo-c2a","depends_on_id":"phlo-qx9","type":"blocks","created_at":"2025-12-10T07:49:53.846175Z","created_by":"daemon"}]}
{"id":"phlo-c2x","title":"Use primary keys and timestamps for smarter row matching","description":"Improve row matching by using table metadata to find the best columns for tracing.\n\nAPPROACH:\n\n1. DETECT KEY COLUMNS:\n   - Query Iceberg table metadata for primary keys\n   - Look for common patterns: id, _id, uuid, created_at, updated_at\n   - Identify columns that appear across multiple stages\n\n2. TIMESTAMP CORRELATION:\n   - If upstream has created_at and downstream has processed_at\n   - Use time proximity matching (within batch window)\n   - Track _dlt_load_id or similar batch identifiers from DLT\n\n3. COMMON COLUMN DETECTION:\n   - Find columns with same name across upstream/downstream\n   - Prioritize: IDs \u003e timestamps \u003e categorical \u003e numeric\n   - Weight by uniqueness (high cardinality = better for matching)\n\n4. SMART WHERE CLAUSE BUILDING:\n   - Use detected keys preferentially over parsed SQL mappings\n   - Fall back to SQL parsing for non-key columns\n   - Combine: WHERE id = X AND date = Y (multiple conditions)\n\n5. BATCH LINEAGE:\n   - Track _dlt_load_id propagation through transforms\n   - For aggregates, show 'From batch loaded at: 2024-01-01 10:00'\n   - Links to batch-level lineage when row-level isn't possible\n\nFILES:\n- src/server/iceberg.server.ts (add getTablePrimaryKeys)\n- src/utils/sqlParser.ts (add key column detection)\n- src/components/data/RowJourney.tsx (use smarter matching)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T22:58:56.604062Z","updated_at":"2025-12-10T19:45:17.55213Z","closed_at":"2025-12-10T19:45:17.55214Z"}
{"id":"phlo-c5z","title":"Implement 'phlo services list' command","description":"Show available services, their status (installed/not), and profiles","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T22:12:06.610995Z","updated_at":"2025-12-08T22:24:35.320144Z","closed_at":"2025-12-08T22:24:35.320144Z","dependencies":[{"issue_id":"phlo-c5z","depends_on_id":"phlo-6qm","type":"blocks","created_at":"2025-12-08T22:12:33.139651Z","created_by":"daemon"},{"issue_id":"phlo-c5z","depends_on_id":"phlo-phy","type":"parent-child","created_at":"2025-12-08T22:12:42.427622Z","created_by":"daemon"}]}
{"id":"phlo-cil","title":"Observatory: Real-time updates (polling/SSE)","description":"Add real-time updates for materialization and check status without manual refresh.","design":"Scope: Implement polling or SSE for asset materialization status. Update check results in real-time. Show in-progress materializations with live progress. Configurable polling interval.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T23:21:44.645087Z","updated_at":"2025-12-20T09:54:44.160973Z","closed_at":"2025-12-20T09:54:44.160973Z","dependencies":[{"issue_id":"phlo-cil","depends_on_id":"phlo-6mz","type":"blocks","created_at":"2025-12-19T23:21:44.646783Z","created_by":"daemon"}]}
{"id":"phlo-cpl","title":"Observatory: Hub Tab (Service Management)","description":"Add a Hub tab to Observatory for managing Phlo services - show status, enable/disable, Docker status, links, descriptions, and credentials from service.yaml and .env","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-10T07:49:05.31887Z","updated_at":"2025-12-10T07:57:01.21639Z","closed_at":"2025-12-10T07:57:01.21639Z","dependencies":[{"issue_id":"phlo-cpl","depends_on_id":"phlo-xxr","type":"parent-child","created_at":"2025-12-10T07:49:45.331162Z","created_by":"daemon"},{"issue_id":"phlo-cpl","depends_on_id":"phlo-qx9","type":"parent-child","created_at":"2025-12-10T07:49:46.686707Z","created_by":"daemon"},{"issue_id":"phlo-cpl","depends_on_id":"phlo-c2a","type":"parent-child","created_at":"2025-12-10T07:49:48.101583Z","created_by":"daemon"},{"issue_id":"phlo-cpl","depends_on_id":"phlo-6z8","type":"parent-child","created_at":"2025-12-10T07:49:49.546795Z","created_by":"daemon"},{"issue_id":"phlo-cpl","depends_on_id":"phlo-grx","type":"parent-child","created_at":"2025-12-10T07:49:51.05645Z","created_by":"daemon"},{"issue_id":"phlo-cpl","depends_on_id":"phlo-8dl","type":"parent-child","created_at":"2025-12-13T00:39:01.86314Z","created_by":"daemon"}]}
{"id":"phlo-cxc","title":"Observatory: Data Provenance \u0026 Audit Trail","description":"Asset detail page showing complete data journey: materialization history, upstream/downstream lineage, transformation steps, quality checks, metadata. Query data with Trino, see how it got to be where it was.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-09T19:04:42.92997Z","updated_at":"2025-12-13T00:18:51.416751Z","closed_at":"2025-12-13T00:18:51.416751Z"}
{"id":"phlo-db5","title":"Define service.yaml schema specification","description":"Define the YAML schema for service definitions: name, description, default, profile, depends_on, build, compose, env_vars","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T22:11:29.330355Z","updated_at":"2025-12-08T22:15:59.870006Z","closed_at":"2025-12-08T22:15:59.870006Z","dependencies":[{"issue_id":"phlo-db5","depends_on_id":"phlo-phy","type":"parent-child","created_at":"2025-12-08T22:12:41.8135Z","created_by":"daemon"}]}
{"id":"phlo-deg","title":"Observatory: Quality Center uses Dagster checks","description":"Update Observatory Quality Center to display Dagster Asset Checks (Pandera + dbt) with history, filtering, failure drilldown, and 'open in SQL' links.","design":"Quality Center should be Dagster-check-native.\n\n- Fetch asset checks and history via Dagster GraphQL.\n- Views: by asset, by run/partition, by status (pass/fail/warn).\n- Drilldown shows metadata, sample rows/ids, and open-in-SQL.\n\nOut of scope: writing checks; this is the UI surface.","acceptance_criteria":"- Quality Center lists Dagster asset checks for Pandera + dbt.\n- Filtering by layer/asset/status works.\n- Drilldown shows metadata and sample + open-in-SQL links.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-13T00:35:00.833323Z","updated_at":"2025-12-14T17:02:30.082496Z","closed_at":"2025-12-14T17:02:30.082496Z","dependencies":[{"issue_id":"phlo-deg","depends_on_id":"phlo-5ug","type":"blocks","created_at":"2025-12-13T00:35:08.305735Z","created_by":"daemon"},{"issue_id":"phlo-deg","depends_on_id":"phlo-xre","type":"blocks","created_at":"2025-12-13T00:35:08.361659Z","created_by":"daemon"},{"issue_id":"phlo-deg","depends_on_id":"phlo-4ut","type":"blocks","created_at":"2025-12-13T00:35:08.416218Z","created_by":"daemon"},{"issue_id":"phlo-deg","depends_on_id":"phlo-emz","type":"parent-child","created_at":"2025-12-13T00:37:39.97679Z","created_by":"daemon"}]}
{"id":"phlo-dg9","title":"Implement 'phlo services add \u003cname\u003e' command","description":"Add a service to an existing lakehouse .phlo/ directory","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T22:12:06.677868Z","updated_at":"2025-12-09T06:15:33.614077Z","closed_at":"2025-12-09T06:15:33.614077Z","dependencies":[{"issue_id":"phlo-dg9","depends_on_id":"phlo-6qm","type":"blocks","created_at":"2025-12-08T22:12:33.189688Z","created_by":"daemon"},{"issue_id":"phlo-dg9","depends_on_id":"phlo-phy","type":"parent-child","created_at":"2025-12-08T22:12:42.478401Z","created_by":"daemon"}]}
{"id":"phlo-dtf","title":"URL-driven state for table selection and journey","description":"Issue #3: State should be URL-driven for shareability and browser navigation.\n\nACTION: \n- Change route from /data/ to /data/$schema/$table (TanStack Router file-based routing)\n- Create /data/$schema.$table/index.tsx route \n- Update TableBrowser to use navigate() instead of local state\n- Derive selectedTable from URL params\n- Add optional journeyRowId param for deep-linking to specific row journeys","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T22:55:09.093974Z","updated_at":"2025-12-09T23:06:59.655951Z","closed_at":"2025-12-09T23:06:59.655951Z"}
{"id":"phlo-ecv","title":"Show lineage confidence and transform type in UI","description":"Display how confident we are in the row lineage and what type of transform each node represents.\n\nUI CHANGES:\n\n1. NODE BADGES:\n   - '1:1' badge (green): Direct mapping, high confidence\n   - 'Group' badge (amber): GROUP BY detected, showing sample rows\n   - 'Complex' badge (red): Can't trace, show table-level only\n\n2. CONFIDENCE INDICATOR:\n   - Show percentage on journey panel header\n   - Tooltip explains what affects confidence\n   - e.g., 'Lineage confidence: 85% - 1:1 transforms detected'\n\n3. EDGE ANNOTATIONS:\n   - Show '1:N' or 'N:1' or '1:1' on edges between nodes\n   - Helps user understand data cardinality changes\n\n4. DATA PANEL MESSAGING:\n   Current: 'Data at this Stage'\n   Change to: \n   - 'Exact source row' (1:1 with key match)\n   - 'Contributing source rows (sample of N)' (aggregated)\n   - 'Related data (approximated)' (complex/uncertain)\n\n5. TOOLTIP ON UNCERTAINTY:\n   - 'Why approximate?' expandable section\n   - Lists: 'GROUP BY detected', 'No common key columns', etc.\n\nFILES: \n- src/components/data/RowJourney.tsx\n- src/utils/sqlParser.ts (add confidence calculation)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T22:58:38.453543Z","updated_at":"2025-12-10T19:29:24.822889Z","closed_at":"2025-12-10T19:29:24.822894Z","dependencies":[{"issue_id":"phlo-ecv","depends_on_id":"phlo-jmb","type":"blocks","created_at":"2025-12-09T22:58:43.307018Z","created_by":"daemon"}]}
{"id":"phlo-eh7","title":"Observatory: Phase 4 - Data Preview + Quality Center","description":"See actual data, centralized quality management. Includes: paginated branch-aware data preview, column profiling, /quality dashboard, check results with trends, failure investigation with sample rows.","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-07T23:41:11.282894Z","updated_at":"2025-12-13T23:04:55.913461Z","closed_at":"2025-12-13T23:04:55.913461Z","dependencies":[{"issue_id":"phlo-eh7","depends_on_id":"phlo-lsd","type":"blocks","created_at":"2025-12-07T23:41:16.771013Z","created_by":"daemon"},{"issue_id":"phlo-eh7","depends_on_id":"phlo-8dl","type":"parent-child","created_at":"2025-12-13T00:39:01.661856Z","created_by":"daemon"}]}
{"id":"phlo-emz","title":"Epic: Observatory Quality \u0026 UX","description":"Parent epic for Observatory roadmap work: quality surfacing (Pandera+dbt as Dagster checks), contributing rows UX, UI system, settings/search, and related polish.","design":"Definition\n- This epic owns cross-cutting UX and quality surfacing for Observatory.\n- Primary deliverables: Dagster checks surfacing (Pandera + dbt), a Quality Center UX, contributing rows UX, and a cohesive UI system.\n- Strong preference for server-side persistence (settings, saved queries, bookmarks) and shareable URLs.\n- Build on shared primitives from the main Observatory phases (table engine, query guardrails, metadata caching).","acceptance_criteria":"Done when\n- Pandera and dbt results appear as Dagster asset checks and are queryable in the UI.\n- Quality Center provides a single place to view check status, failures, and debugging links.\n- Users can navigate from a gold row (or check failure) to contributing source rows.\n- Search/settings/bookmarks/saved queries work and persist across sessions.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-13T00:37:30.41306Z","updated_at":"2025-12-20T10:40:46.233811Z","closed_at":"2025-12-20T10:40:46.233811Z","dependencies":[{"issue_id":"phlo-emz","depends_on_id":"phlo-8dl","type":"parent-child","created_at":"2025-12-13T00:39:01.965069Z","created_by":"daemon"}]}
{"id":"phlo-fvx","title":"Remove legacy services/hub/","description":"Remove deprecated hub landing page service","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T22:11:37.241518Z","updated_at":"2025-12-08T22:14:44.908999Z","closed_at":"2025-12-08T22:14:44.908999Z","dependencies":[{"issue_id":"phlo-fvx","depends_on_id":"phlo-phy","type":"parent-child","created_at":"2025-12-08T22:12:41.971388Z","created_by":"daemon"}]}
{"id":"phlo-g9c","title":"Reconsider row-level journey visualization approach","description":"Issue #6: Unclear if current approach truly shows data journey for a single row.\n\nCURRENT IMPLEMENTATION ANALYSIS:\nThe sqlParser.ts attempts row-level lineage via SQL reverse-engineering:\n1. parseColumnMappings() extracts SELECT clause column aliases and transformations\n2. buildUpstreamWhereClause() builds WHERE conditions using parsed mappings\n3. Aggregate functions (COUNT, SUM, etc.) are correctly skipped\n4. Handles DATE(), CAST() transformations\n\nLIMITATIONS FOUND:\n- Only parses basic SELECT...FROM pattern (line 29: /SELECT\\s+(.*?)\\s+FROM/is)\n- Doesn't handle CTEs (WITH clauses)\n- Doesn't handle subqueries\n- Doesn't handle window functions (ROW_NUMBER, LEAD, LAG)\n- extractSourceTables() only finds simple FROM/JOIN patterns (lines 201-216)\n- Can't trace through UNION/INTERSECT/EXCEPT\n- GROUP BY semantics: even non-aggregate columns represent groups of rows\n\nWHAT ACTUALLY HAPPENS:\nFor aggregated data (fct_daily_github_metrics):\n- User clicks row: activity_date='2024-01-01', total_events=150\n- Parser extracts: DATE(created_at) AS activity_date\n- Upstream query: SELECT * FROM stg_github_events WHERE DATE(created_at)='2024-01-01' LIMIT 10\n- Returns sample of ~10 rows that CONTRIBUTED to the aggregate\n- NOT the actual row lineage - fundamental mismatch\n\nOPTIONS:\nA) Honest messaging: Label as 'Contributing source rows' not 'Row lineage'\nB) Focus on 1:1 transforms only: stg_ tables tracing back to dlt_ tables work well\nC) Table-level + sample: Show asset lineage graph + sample upstream data\nD) Probabilistic filtering: Add timestamps/batch_ids for correlation\n\nRECOMMENDATION: Rename feature to 'Data Journey' (not row lineage). Show:\n- Asset-level lineage (already working)\n- 'Sample source data' panel with clear messaging about what it represents\n- Only claim row-level accuracy for non-aggregate 1:1 transforms","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-09T22:55:47.811871Z","updated_at":"2025-12-11T22:34:06.596157Z","closed_at":"2025-12-11T22:34:06.596157Z"}
{"id":"phlo-grx","title":"Add Hub nav item to sidebar","description":"Add Hub link to __root.tsx sidebar navigation with appropriate icon","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-10T07:49:22.879758Z","updated_at":"2025-12-10T07:56:38.993465Z","closed_at":"2025-12-10T07:56:38.993465Z"}
{"id":"phlo-h2c","title":"Observatory: Authentication (environment-level)","description":"Add environment-level authentication to protect Observatory endpoints and saved artifacts.","design":"Scope: Implement basic auth or API key-based auth. Protect all server functions and saved artifacts. Environment variable configuration. Clear error messages for unauthenticated requests.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T23:21:38.925457Z","updated_at":"2025-12-20T09:54:44.09788Z","closed_at":"2025-12-20T09:54:44.09788Z","dependencies":[{"issue_id":"phlo-h2c","depends_on_id":"phlo-6mz","type":"blocks","created_at":"2025-12-19T23:21:38.928529Z","created_by":"daemon"}]}
{"id":"phlo-jmb","title":"Improve SQL parser to handle more patterns","description":"Enhance sqlParser.ts to handle more SQL patterns for better row tracing accuracy.\n\nADDITIONS TO IMPLEMENT:\n\n1. CTE SUPPORT (WITH clauses):\n   - Extract CTE definitions before main SELECT\n   - Track column mappings through CTEs\n   - Regex: /WITH\\s+(\\w+)\\s+AS\\s*\\((.*?)\\)/gis\n\n2. WINDOW FUNCTIONS:\n   - Detect OVER() clauses and mark columns as 'windowed'\n   - For ROW_NUMBER/RANK, the underlying row data is still 1:1\n   - For LEAD/LAG, note offset relationship\n\n3. CASE EXPRESSIONS:\n   - Parse CASE WHEN...THEN...ELSE...END\n   - Extract source columns from conditions\n\n4. SUBQUERY DETECTION:\n   - Detect subqueries in FROM clause\n   - Mark as 'complex' and skip row-level tracing\n\n5. TRANSFORM TYPE CLASSIFICATION:\n   - ONE_TO_ONE: Simple SELECT, CAST, CASE, date formatting\n   - ONE_TO_MANY: Window functions with PARTITION\n   - MANY_TO_ONE: GROUP BY, DISTINCT, aggregates\n   - COMPLEX: Subqueries, CTEs, joins\n\n6. CONFIDENCE SCORE:\n   - Return confidence 0-100% based on:\n     - Parser fully understood SQL: +30%\n     - No aggregates: +30%\n     - No GROUP BY: +20%\n     - Has traceable key columns: +20%\n\nFILES: src/utils/sqlParser.ts","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T22:58:21.81117Z","updated_at":"2025-12-10T19:18:45.54017Z","closed_at":"2025-12-10T19:18:45.540178Z"}
{"id":"phlo-lsd","title":"Observatory: Phase 3 - Version Control (Nessie)","description":"Git-like data versioning interface. Includes: /branches with visual branch tree, commit history, branch comparison with schema diffs, time-travel data preview, create/merge branch UI.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-07T23:41:08.651543Z","updated_at":"2025-12-09T17:46:05.772751Z","closed_at":"2025-12-09T17:46:05.772751Z","dependencies":[{"issue_id":"phlo-lsd","depends_on_id":"phlo-qqm","type":"blocks","created_at":"2025-12-07T23:41:16.72128Z","created_by":"daemon"},{"issue_id":"phlo-lsd","depends_on_id":"phlo-8dl","type":"parent-child","created_at":"2025-12-13T00:39:01.557114Z","created_by":"daemon"}]}
{"id":"phlo-lx7","title":"Move node details from inline expansion to detail panel below flow","description":"Issue #4: SQL and data in expanded React Flow nodes are hard to read because the nodes are the wrong place for dense information.\n\nACTION:\n- Add selectedNode state to RowJourney or parent component\n- Clicking a node sets selectedNode (instead of expanding inline)\n- Render a detail panel BELOW the React Flow component (like the existing 'Selected Row Data' panel)\n- Detail panel shows: Transformation SQL, Quality checks, Row data at that stage\n- Keep nodes small/simple, just showing asset name and type badge","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T22:55:20.956933Z","updated_at":"2025-12-09T23:06:59.657491Z","closed_at":"2025-12-09T23:06:59.657491Z"}
{"id":"phlo-ma0","title":"Quality: Check naming \u0026 metadata conventions","description":"Adopt naming scheme (pandera/contract, dbt/\u003ctype\u003e/\u003ctarget\u003e) and required metadata payload (partition_key, failed_count, total_count, sql/query, sample rows/ids).","design":"Goal: make check output consistent across Pandera + dbt.\n\nProposed names:\n- Pandera: pandera/contract\n- dbt: dbt/\u003ctest_type\u003e/\u003ctarget\u003e\n\nRequired metadata keys:\n- partition_key (if partitioned)\n- failed_count\n- total_count (if cheap)\n- query_or_sql\n- sample (\u003c=20 rows/ids)\n- source (pandera|dbt)\n\nOut of scope: anomaly detection.","acceptance_criteria":"- Documented naming + metadata contract in repo docs or internal module.\n- At least one Pandera-derived and one dbt-derived check follow the contract.\n- Observatory renders key metadata without special-casing.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T00:35:00.592889Z","updated_at":"2025-12-13T16:46:23.27429Z","closed_at":"2025-12-13T16:46:23.27429Z","dependencies":[{"issue_id":"phlo-ma0","depends_on_id":"phlo-emz","type":"parent-child","created_at":"2025-12-13T00:37:40.041181Z","created_by":"daemon"}]}
{"id":"phlo-mne","title":"Observatory: Phase 0 - Minimal Scaffold","description":"De-risk TanStack Start with minimal viable scaffold. Just dashboard route, one working server function, and Docker integration. Proves the stack before full Phase 1 scope.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-07T23:43:41.908505Z","updated_at":"2025-12-08T12:19:06.748884Z","closed_at":"2025-12-08T12:19:06.748884Z","dependencies":[{"issue_id":"phlo-mne","depends_on_id":"phlo-8dl","type":"parent-child","created_at":"2025-12-13T00:39:01.167876Z","created_by":"daemon"}]}
{"id":"phlo-mne.1","title":"Scaffold TanStack Start project","description":"Initialize TanStack Start project in services/observatory. Setup vite.config.ts, tsconfig.json, package.json with core dependencies. Verify dev server runs.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T23:43:49.408962Z","updated_at":"2025-12-08T12:09:40.56915Z","closed_at":"2025-12-08T12:09:40.56915Z","dependencies":[{"issue_id":"phlo-mne.1","depends_on_id":"phlo-mne","type":"parent-child","created_at":"2025-12-07T23:43:49.409662Z","created_by":"daemon"}]}
{"id":"phlo-mne.2","title":"Create root layout and dashboard route","description":"Create __root.tsx with basic navigation shell and index.tsx for dashboard. Just static placeholder content to verify routing works.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T23:43:52.454021Z","updated_at":"2025-12-08T12:12:24.993198Z","closed_at":"2025-12-08T12:12:24.993198Z","dependencies":[{"issue_id":"phlo-mne.2","depends_on_id":"phlo-mne","type":"parent-child","created_at":"2025-12-07T23:43:52.454484Z","created_by":"daemon"},{"issue_id":"phlo-mne.2","depends_on_id":"phlo-mne.1","type":"blocks","created_at":"2025-12-07T23:44:06.528992Z","created_by":"daemon"}]}
{"id":"phlo-mne.3","title":"Implement Dagster health check server function","description":"Create dagster.server.ts with getHealthMetrics() server function. Fetch asset count, failed jobs, etc from Dagster GraphQL API. Prove server function pattern works.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T23:43:54.86727Z","updated_at":"2025-12-08T12:14:02.377179Z","closed_at":"2025-12-08T12:14:02.377179Z","dependencies":[{"issue_id":"phlo-mne.3","depends_on_id":"phlo-mne","type":"parent-child","created_at":"2025-12-07T23:43:54.869912Z","created_by":"daemon"},{"issue_id":"phlo-mne.3","depends_on_id":"phlo-mne.2","type":"blocks","created_at":"2025-12-07T23:44:06.58873Z","created_by":"daemon"}]}
{"id":"phlo-mne.4","title":"Wire dashboard to display live health metrics","description":"Update dashboard route to call Dagster server function and display real metrics. Add basic Tailwind styling for health cards.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T23:43:57.617136Z","updated_at":"2025-12-08T12:17:56.59178Z","closed_at":"2025-12-08T12:17:56.59178Z","dependencies":[{"issue_id":"phlo-mne.4","depends_on_id":"phlo-mne","type":"parent-child","created_at":"2025-12-07T23:43:57.622646Z","created_by":"daemon"},{"issue_id":"phlo-mne.4","depends_on_id":"phlo-mne.3","type":"blocks","created_at":"2025-12-07T23:44:06.64535Z","created_by":"daemon"}]}
{"id":"phlo-mne.5","title":"Docker integration for Observatory","description":"Create Dockerfile for Observatory service. Add to docker-compose.override.yml with proper networking to Dagster, Nessie, Trino. Verify works in containerized environment.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T23:43:58.142482Z","updated_at":"2025-12-08T12:19:05.462782Z","closed_at":"2025-12-08T12:19:05.462782Z","dependencies":[{"issue_id":"phlo-mne.5","depends_on_id":"phlo-mne","type":"parent-child","created_at":"2025-12-07T23:43:58.143497Z","created_by":"daemon"},{"issue_id":"phlo-mne.5","depends_on_id":"phlo-mne.4","type":"blocks","created_at":"2025-12-07T23:44:06.73387Z","created_by":"daemon"}]}
{"id":"phlo-npw","title":"Observatory: Settings (connections + preferences)","description":"Settings UI and storage for Dagster/Trino/Nessie URLs, default branch/catalog/schema, query defaults (limit/timeout), safe mode (SELECT-only), UI prefs (theme/density/date format).","design":"Settings UI for connections + preferences.\n\n- Connection settings: Dagster GraphQL URL, Trino URL, Nessie URL.\n- Defaults: catalog/schema/branch, query limit/timeout.\n- Safety: read-only mode (SELECT-only) toggle.\n- Persistence: localStorage first, with env defaults.\n\nOut of scope: auth/RBAC.","acceptance_criteria":"- Settings page exists and persists values.\n- App uses settings for server calls.\n- Read-only mode affects Query Editor execution.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-13T00:22:28.047762Z","updated_at":"2025-12-16T20:45:23.939464Z","closed_at":"2025-12-16T20:45:23.939464Z","dependencies":[{"issue_id":"phlo-npw","depends_on_id":"phlo-bms","type":"blocks","created_at":"2025-12-13T00:22:40.922696Z","created_by":"daemon"},{"issue_id":"phlo-npw","depends_on_id":"phlo-emz","type":"parent-child","created_at":"2025-12-13T00:37:40.449842Z","created_by":"daemon"}]}
{"id":"phlo-nwk","title":"Epic: Core Platform Hardening","description":"Non-example codebase improvements across ingestion, transforms, CLI, and Observatory service.","design":"Scope\\n- Fix correctness and typing issues blocking development.\\n- Remove placeholder-style scaffolding behaviors that create tech debt.\\n- Improve observability/debuggability (structured logging, clear errors).\\n- Keep changes scalable and consistent with Phlo conventions.","acceptance_criteria":"Done when\\n- Child epics are completed or explicitly descoped.\\n- basedpyright passes for src/phlo/.\\n- CLI scaffolding and services management have no placeholder/TODO outputs by default.\\n- Observatory backend TODOs that affect data visibility are resolved.","status":"closed","priority":0,"issue_type":"epic","created_at":"2025-12-13T12:20:12.756468Z","updated_at":"2025-12-20T10:41:06.267866Z","closed_at":"2025-12-20T10:41:06.267866Z"}
{"id":"phlo-nwk.1","title":"Epic: Observatory Backend Completeness","description":"Finish remaining server-side TODOs in the Observatory service that impact data visibility and quality views.","design":"Focus areas\\n- Remove hardcoded branch defaults; make branch-aware queries consistent.\\n- Implement missing quality check summary/failure queries.\\n- Ensure endpoints return complete/accurate data for gold/silver tables.","acceptance_criteria":"Done when\\n- Observatory no longer shows placeholder zeros/empty lists due to TODO code paths.\\n- Branch selection affects backend queries consistently.\\n- Quality endpoints provide real data for checks and executions.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-13T12:20:38.808116Z","updated_at":"2025-12-20T10:40:46.228774Z","closed_at":"2025-12-20T10:40:46.228774Z","dependencies":[{"issue_id":"phlo-nwk.1","depends_on_id":"phlo-nwk","type":"parent-child","created_at":"2025-12-13T12:20:38.809209Z","created_by":"garethprice"},{"issue_id":"phlo-nwk.1","depends_on_id":"phlo-emz","type":"related","created_at":"2025-12-13T12:22:51.623556Z","created_by":"garethprice"}]}
{"id":"phlo-nwk.1.1","title":"Observatory: implement failing checks and recent executions endpoints","description":"services/observatory/src/server/quality.server.ts has TODO stubs for failing checks across assets and recent executions.","design":"Implementation\n- Implement failing-checks query across assets (partition-aware where possible).\n- Implement recent executions list (runs/materializations/check evaluations).\n- Ensure errors are surfaced clearly to the UI (empty vs unavailable).\n- Add tests for response shaping.","acceptance_criteria":"Done when\n- Quality pages show real failing checks and recent executions data.\n- Empty states are accurate (no data vs error).\n- Endpoints are covered by unit tests.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T12:22:31.882194Z","updated_at":"2025-12-14T11:25:38.265076Z","closed_at":"2025-12-14T11:25:38.265076Z","dependencies":[{"issue_id":"phlo-nwk.1.1","depends_on_id":"phlo-nwk.1","type":"parent-child","created_at":"2025-12-13T12:22:31.883069Z","created_by":"garethprice"}]}
{"id":"phlo-nwk.1.2","title":"Observatory: remove hardcoded branch and make data explorer branch-aware","description":"services/observatory currently hardcodes branch=main in the data explorer route; this breaks workflows where users browse dev branches.","design":"Implementation\n- Add a branch selector in UI state (or use existing) and propagate branch via URL params.\n- Ensure server endpoints accept branch and pass it through to Trino/Nessie queries.\n- Default to main only when no branch is provided.","acceptance_criteria":"Done when\n- Data explorer loads data for non-main branches when selected.\n- URLs are shareable and preserve branch selection.\n- No hardcoded branch literals remain in request path for data explorer.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T12:22:32.020267Z","updated_at":"2025-12-14T12:46:05.620103Z","closed_at":"2025-12-14T12:46:05.620103Z","dependencies":[{"issue_id":"phlo-nwk.1.2","depends_on_id":"phlo-nwk.1","type":"parent-child","created_at":"2025-12-13T12:22:32.021127Z","created_by":"garethprice"}]}
{"id":"phlo-nwk.1.3","title":"Observatory: implement Dagster quality checks summary queries","description":"services/observatory/src/server/dagster.server.ts has placeholder quality check counts (qualityChecksPassing: 0).","design":"Implementation\n- Query Dagster GraphQL for asset checks and compute summary counts (passing/warning/failing) for the UI.\n- Cache results briefly to avoid hammering Dagster.\n- Add unit tests around the GraphQL response parsing.","acceptance_criteria":"Done when\n- UI shows correct passing/warning/failing quality check counts.\n- No TODO placeholder values remain in dagster.server.ts quality summary.\n- Parsing is covered by tests.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T12:22:32.156558Z","updated_at":"2025-12-14T11:25:38.271402Z","closed_at":"2025-12-14T11:25:38.271402Z","dependencies":[{"issue_id":"phlo-nwk.1.3","depends_on_id":"phlo-nwk.1","type":"parent-child","created_at":"2025-12-13T12:22:32.157409Z","created_by":"garethprice"}]}
{"id":"phlo-nwk.2","title":"Epic: dbt/Dagster Transform Hardening","description":"Fix correctness, typing, grouping, and metadata handling for dbt assets in Dagster.","design":"Focus areas\\n- Correct translator typing and behavior (basedpyright + runtime).\\n- Ensure dbt layer grouping matches bronze/silver/gold/marts conventions.\\n- Ensure compiled SQL/metadata used for lineage is stored safely (size caps, no noisy logs).","acceptance_criteria":"Done when\\n- basedpyright error in CustomDbtTranslator is resolved.\\n- dbt assets appear in the intended Dagster groups.\\n- Lineage SQL metadata is available without bloating asset descriptions/logs.","status":"closed","priority":0,"issue_type":"epic","created_at":"2025-12-13T12:20:38.937944Z","updated_at":"2025-12-20T10:40:46.223736Z","closed_at":"2025-12-20T10:40:46.223736Z","dependencies":[{"issue_id":"phlo-nwk.2","depends_on_id":"phlo-nwk","type":"parent-child","created_at":"2025-12-13T12:20:38.9387Z","created_by":"garethprice"}]}
{"id":"phlo-nwk.2.1","title":"Fix CustomDbtTranslator.get_description typing + logging","description":"basedpyright currently fails because CustomDbtTranslator.get_description returns str|None. Also translator logs noisy info per model.","design":"Implementation\\n- Change get_description signature to return str (never None).\\n- Ensure empty description returns ''.\\n- Downgrade per-model logs to debug and/or gate behind an env flag; remove path/exists spam.","acceptance_criteria":"Done when\\n- basedpyright passes with no errors for src/phlo/.\\n- Dagster loads dbt assets without emitting per-model info logs by default.\\n- No behavior regressions in compiled SQL retrieval.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-13T12:20:59.232792Z","updated_at":"2025-12-13T16:13:10.470698Z","closed_at":"2025-12-13T16:13:10.470698Z","dependencies":[{"issue_id":"phlo-nwk.2.1","depends_on_id":"phlo-nwk.2","type":"parent-child","created_at":"2025-12-13T12:20:59.233588Z","created_by":"garethprice"}]}
{"id":"phlo-nwk.2.2","title":"Fix dbt asset grouping (bronze/silver/gold/marts)","description":"CustomDbtTranslator.get_group_name currently misclassifies common model prefixes and can mis-group assets in Dagster/Observatory.","design":"Implementation\\n- Prefer folder-based grouping from dbt fqn/model path (bronze/silver/gold/marts/staging).\\n- If naming fallback is used, map stg_ -\u003e silver (staging), dim_/fct_ -\u003e gold (or marts if that is your convention), and mrt_ -\u003e marts, aligned with repo conventions.\\n- Add a small unit test for representative model names and fqns.","acceptance_criteria":"Done when\\n- Group names in Dagster match dbt layer conventions for representative models.\\n- No regression for dbt sources and non-layered models.\\n- Tests cover at least stg_, dim_, fct_, mrt_ and folder-derived grouping.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T12:21:06.085465Z","updated_at":"2025-12-13T23:03:05.591025Z","closed_at":"2025-12-13T23:03:05.591025Z","dependencies":[{"issue_id":"phlo-nwk.2.2","depends_on_id":"phlo-nwk.2","type":"parent-child","created_at":"2025-12-13T12:21:06.086268Z","created_by":"garethprice"}]}
{"id":"phlo-nwk.2.3","title":"Move compiled SQL lineage payload out of asset description","description":"CustomDbtTranslator currently embeds compiled SQL inside the Dagster asset description. This risks huge metadata payloads and slow UI loads.","design":"Implementation\\n- Store compiled SQL in a dedicated metadata entry (e.g., MaterializeResult metadata or Dagster asset metadata) with a size cap.\\n- Keep the human description short (docstring + minimal header).\\n- Add a max-bytes cap and truncate with an explicit marker.\\n- Add an opt-in flag if full SQL is needed.","acceptance_criteria":"Done when\\n- Dagster asset description no longer contains full compiled SQL by default.\\n- Observatory/lineage code can still access the compiled SQL payload (from metadata) when needed.\\n- Very large models do not cause huge metadata blobs (truncation verified).","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-13T12:21:11.722847Z","updated_at":"2025-12-13T23:03:05.593266Z","closed_at":"2025-12-13T23:03:05.593266Z","dependencies":[{"issue_id":"phlo-nwk.2.3","depends_on_id":"phlo-nwk.2","type":"parent-child","created_at":"2025-12-13T12:21:11.723754Z","created_by":"garethprice"},{"issue_id":"phlo-nwk.2.3","depends_on_id":"phlo-nwk.2.1","type":"blocks","created_at":"2025-12-13T12:22:51.137434Z","created_by":"garethprice"}]}
{"id":"phlo-nwk.2.4","title":"Add unit tests for CustomDbtTranslator","description":"Lock down asset key mapping, grouping, and description/metadata behavior to prevent regressions.","design":"Test cases\n- Source asset key mapping for dagster_assets sources maps to dlt_\u003ctable\u003e.\n- Group derivation prefers fqn folder, falls back to naming, matches conventions.\n- get_description returns str and does not include full compiled SQL (once phlo-nwk.2.3 is implemented).","acceptance_criteria":"Done when\n- Tests cover key mapping + grouping + description return type.\n- Tests run in CI and are stable (no filesystem dependency on dbt target outputs).","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T12:21:26.274791Z","updated_at":"2025-12-13T23:03:05.595008Z","closed_at":"2025-12-13T23:03:05.595008Z","dependencies":[{"issue_id":"phlo-nwk.2.4","depends_on_id":"phlo-nwk.2","type":"parent-child","created_at":"2025-12-13T12:21:26.275507Z","created_by":"garethprice"},{"issue_id":"phlo-nwk.2.4","depends_on_id":"phlo-nwk.2.2","type":"blocks","created_at":"2025-12-13T12:22:51.254149Z","created_by":"garethprice"},{"issue_id":"phlo-nwk.2.4","depends_on_id":"phlo-nwk.2.1","type":"blocks","created_at":"2025-12-13T12:22:51.369651Z","created_by":"garethprice"},{"issue_id":"phlo-nwk.2.4","depends_on_id":"phlo-nwk.2.3","type":"blocks","created_at":"2025-12-13T12:22:51.508927Z","created_by":"garethprice"}]}
{"id":"phlo-nwk.3","title":"Epic: CLI \u0026 Developer Experience Hardening","description":"Reduce tech debt and improve reliability of CLI scaffolding, services orchestration, and public API ergonomics.","design":"Focus areas\\n- Remove placeholder/TODO-heavy scaffolds; generate minimal working code or require explicit inputs.\\n- Refactor overly-large CLI modules for testability.\\n- Make CLI output and errors consistent and structured.","acceptance_criteria":"Done when\\n- Scaffold outputs are actionable and do not ship placeholder TODOs by default.\\n- phlo services commands fail fast with clear errors; core logic is unit-testable.\\n- Public API exports are type-check clean.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-13T12:20:39.064218Z","updated_at":"2025-12-20T10:40:46.231092Z","closed_at":"2025-12-20T10:40:46.231092Z","dependencies":[{"issue_id":"phlo-nwk.3","depends_on_id":"phlo-nwk","type":"parent-child","created_at":"2025-12-13T12:20:39.065075Z","created_by":"garethprice"}]}
{"id":"phlo-nwk.3.1","title":"Stop scaffold generator from emitting TODO/placeholder code by default","description":"src/phlo/cli/scaffold.py generates files containing many TODO placeholders, which conflicts with Phlo's no placeholders philosophy.","design":"Implementation\n- Require explicit inputs (fields/auth/pagination) or run an interactive prompt to collect them.\n- Generate minimal working assets/schemas/tests that either pass or clearly fail with a single actionable error.\n- Provide an explicit --with-todos flag if placeholders are ever desired.","acceptance_criteria":"Done when\n- Default scaffold output contains no TODO blocks or commented placeholder sections.\n- Generated code is syntactically valid and passes ruff format.\n- Users can still generate a starter workflow without manual cleanup.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T12:22:05.868934Z","updated_at":"2025-12-13T22:56:11.08333Z","closed_at":"2025-12-13T22:56:11.08333Z","dependencies":[{"issue_id":"phlo-nwk.3.1","depends_on_id":"phlo-nwk.3","type":"parent-child","created_at":"2025-12-13T12:22:05.869868Z","created_by":"garethprice"}]}
{"id":"phlo-nwk.3.2","title":"Refactor phlo CLI services module for testability and clearer errors","description":"src/phlo/cli/services.py is ~1300 LOC, heavily subprocess-based, and contains many broad exception catches.","design":"Implementation\n- Split into smaller modules (docker client wrapper, compose generation, container discovery, logs).\n- Centralize subprocess execution with consistent error handling and timeouts.\n- Reduce bare except/pass; return structured errors for CLI rendering.\n- Add unit tests for container name resolution and compose file generation.","acceptance_criteria":"Done when\n- services logic is split into smaller modules with clear responsibilities.\n- Core operations are unit-tested without requiring Docker.\n- Error messages are consistent and actionable (include command + stderr on failure).","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-13T12:22:06.00348Z","updated_at":"2025-12-13T22:56:11.087784Z","closed_at":"2025-12-13T22:56:11.087784Z","dependencies":[{"issue_id":"phlo-nwk.3.2","depends_on_id":"phlo-nwk.3","type":"parent-child","created_at":"2025-12-13T12:22:06.004345Z","created_by":"garethprice"}]}
{"id":"phlo-nwk.3.3","title":"Fix public API exports (__all__) to satisfy basedpyright","description":"basedpyright warns that __all__ references names not present due to lazy __getattr__ exports.","design":"Implementation\n- Either make exports concrete (import and re-export) or adjust __all__ to reflect actual symbols.\n- Ensure phlo.ingestion and NessieResource remain discoverable but type-check clean.\n- Add/adjust a small type-check-oriented test if needed.","acceptance_criteria":"Done when\n- basedpyright reports no __all__-related warnings.\n- Public API remains ergonomic (phlo.ingestion and phlo.quality still work as documented).","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T12:22:06.141169Z","updated_at":"2025-12-13T22:56:28.663244Z","closed_at":"2025-12-13T22:56:28.663244Z","dependencies":[{"issue_id":"phlo-nwk.3.3","depends_on_id":"phlo-nwk.3","type":"parent-child","created_at":"2025-12-13T12:22:06.142011Z","created_by":"garethprice"}]}
{"id":"phlo-nwk.3.4","title":"CLI: scaffold publishing.yaml","description":"Add a CLI command to scaffold publishing.yaml from current project state (dbt manifest + existing publishing config).","design":"Implementation\n- Command reads dbt manifest for model/column metadata.\n- Generates minimal valid publishing.yaml stanzas for selected models.\n- Idempotent: preserves manual edits and adds missing sections.\n- Include a --select option to restrict scope.","acceptance_criteria":"Done when\n- publishing.yaml can be generated for a project with dbt models.\n- Re-running does not clobber manual edits.\n- Publishing loader accepts the file without errors.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-13T12:22:06.277724Z","updated_at":"2025-12-13T23:04:55.908909Z","closed_at":"2025-12-13T23:04:55.908909Z","dependencies":[{"issue_id":"phlo-nwk.3.4","depends_on_id":"phlo-nwk.3","type":"parent-child","created_at":"2025-12-13T12:22:06.278673Z","created_by":"garethprice"}]}
{"id":"phlo-nwk.3.5","title":"CLI: generate Pandera schemas from DLT inference","description":"Generate Pandera DataFrameModel schemas from DLT-inferred types or the actual loaded table schema to prevent drift.","design":"Implementation\n- Command inspects DLT schema/type inference (or Trino/Iceberg table schema) and produces src/phlo/schemas/\u003cdomain\u003e.py entries.\n- Map timestamp types with timezone awareness and correct nullability.\n- Provide dry-run and update-in-place modes.\n- Keep output ruff-format compatible.","acceptance_criteria":"Done when\n- Command can generate schemas for at least one real table without manual edits.\n- Generated schemas match the actual table schema (no mismatch on validate).\n- ruff + basedpyright pass on generated output.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-13T12:22:06.416786Z","updated_at":"2025-12-14T14:16:06.161987Z","closed_at":"2025-12-14T14:16:06.161987Z","dependencies":[{"issue_id":"phlo-nwk.3.5","depends_on_id":"phlo-nwk.3","type":"parent-child","created_at":"2025-12-13T12:22:06.417573Z","created_by":"garethprice"}]}
{"id":"phlo-nwk.3.6","title":"Replace print() in library modules with structured logging","description":"Some core modules use print() (e.g., Iceberg table ops), which bypasses structured logging and Dagster context.","design":"Implementation\n- Replace print() with logger calls and/or context.log when context is available.\n- Keep CLI user-facing output in CLI layer (rich/click), not in core libs.\n- Add/adjust tests where print output was relied upon.","acceptance_criteria":"Done when\n- No print() remains in non-CLI code paths (src/phlo/* excluding cli/ and testing/).\\n- Logs are visible via Dagster/observability tooling.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T12:22:17.187591Z","updated_at":"2025-12-13T22:56:28.665147Z","closed_at":"2025-12-13T22:56:28.665147Z","dependencies":[{"issue_id":"phlo-nwk.3.6","depends_on_id":"phlo-nwk.3","type":"parent-child","created_at":"2025-12-13T12:22:17.188431Z","created_by":"garethprice"}]}
{"id":"phlo-nwk.4","title":"Epic: Ingestion \u0026 Validation Correctness","description":"Improve correctness and robustness of ingestion helpers, schema validation, and metadata injection.","design":"Focus areas\\n- Avoid unsafe/coercive parsing (timestamps, object columns).\\n- Make validation failures actionable without silently hiding issues.\\n- Keep metadata injection scalable for large partitions.","acceptance_criteria":"Done when\\n- Validation does not coerce unrelated string/object columns.\\n- Validation/merge errors surface with clear diagnostics.\\n- Metadata injection performance is acceptable for large loads.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-13T12:20:39.190588Z","updated_at":"2025-12-20T10:40:46.232642Z","closed_at":"2025-12-20T10:40:46.232642Z","dependencies":[{"issue_id":"phlo-nwk.4","depends_on_id":"phlo-nwk","type":"parent-child","created_at":"2025-12-13T12:20:39.191378Z","created_by":"garethprice"}]}
{"id":"phlo-nwk.4.1","title":"Optimize _phlo_row_id generation for large parquet injections","description":"inject_metadata_columns generates ULIDs in a Python loop per row; this can be a bottleneck for large partitions.","design":"Implementation options\n- Generate row ids in batches or using a faster generator.\n- Consider allowing a deterministic row id mode (hash of key fields) when unique_key exists.\n- Benchmark before/after on a representative row count.","acceptance_criteria":"Done when\n- Metadata injection is measurably faster for large row counts.\n- Row ids remain unique (or deterministic when explicitly configured).\n- No change to default semantics unless opted-in.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-13T12:21:42.009329Z","updated_at":"2025-12-19T00:21:54.89301Z","closed_at":"2025-12-19T00:21:54.893016Z","dependencies":[{"issue_id":"phlo-nwk.4.1","depends_on_id":"phlo-nwk.4","type":"parent-child","created_at":"2025-12-13T12:21:42.010088Z","created_by":"garethprice"}]}
{"id":"phlo-nwk.4.2","title":"Stop validate_with_pandera from coercing all object columns to datetime","description":"validate_with_pandera attempts pd.to_datetime on every object column, which can silently coerce non-timestamp fields and distort data.","design":"Implementation\n- Remove blanket object-column coercion.\n- If coercion is needed, derive timestamp columns from the Pandera schema/type mapping and only coerce those.\n- Add a unit test demonstrating a non-timestamp string column remains unchanged.","acceptance_criteria":"Done when\n- Only intended timestamp columns are parsed/coerced.\n- Non-timestamp string fields are not modified.\n- Tests cover at least one timestamp column and one string column.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-13T12:21:42.145004Z","updated_at":"2025-12-13T16:12:10.235834Z","closed_at":"2025-12-13T16:12:10.235834Z","dependencies":[{"issue_id":"phlo-nwk.4.2","depends_on_id":"phlo-nwk.4","type":"parent-child","created_at":"2025-12-13T12:21:42.145928Z","created_by":"garethprice"}]}
{"id":"phlo-nwk.4.3","title":"Make ingestion validation failures actionable (configurable strictness)","description":"Several ingestion paths catch exceptions and warn/continue, which can hide real data quality issues.","design":"Implementation\n- Introduce a clear policy knob (e.g., strict_validation: bool) for ingestion validation.\n- When non-strict: keep warning+continue but include structured metadata (counts, sample failures).\n- When strict: fail the asset with a clear exception message.\n- Ensure behavior is consistent across Pandera validation and merge/dedup steps.","acceptance_criteria":"Done when\n- Users can choose strict vs warn behavior via config.\n- Warning mode includes enough info to debug without rerunning manually.\n- Strict mode fails fast and surfaces the root cause.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-13T12:21:42.278685Z","updated_at":"2025-12-18T19:29:45.253479Z","closed_at":"2025-12-18T19:29:45.253488Z","dependencies":[{"issue_id":"phlo-nwk.4.3","depends_on_id":"phlo-nwk.4","type":"parent-child","created_at":"2025-12-13T12:21:42.279435Z","created_by":"garethprice"},{"issue_id":"phlo-nwk.4.3","depends_on_id":"phlo-nwk.4.2","type":"blocks","created_at":"2025-12-13T12:22:51.739473Z","created_by":"garethprice"}]}
{"id":"phlo-nwk.4.4","title":"Remove deprecated add_phlo_timestamp path","description":"add_phlo_timestamp is marked deprecated in ingestion/dlt_helpers.py; keep only parquet-level metadata injection.","design":"Implementation\n- Identify remaining callers (if any) and migrate them to inject_metadata_columns.\n- Remove the deprecated function and update docs/tests accordingly.","acceptance_criteria":"Done when\n- No code paths call add_phlo_timestamp.\n- Deprecated helper is removed and tests still pass.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-13T12:22:17.047625Z","updated_at":"2025-12-18T19:29:45.31677Z","closed_at":"2025-12-18T19:29:45.316779Z","dependencies":[{"issue_id":"phlo-nwk.4.4","depends_on_id":"phlo-nwk.4","type":"parent-child","created_at":"2025-12-13T12:22:17.051045Z","created_by":"garethprice"},{"issue_id":"phlo-nwk.4.4","depends_on_id":"phlo-nwk.4.2","type":"blocks","created_at":"2025-12-13T12:22:51.854184Z","created_by":"garethprice"}]}
{"id":"phlo-o0q","title":"Create services/observability/ with prometheus, grafana, loki","description":"Monitoring stack with service.yaml and config files for each","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T22:11:57.377729Z","updated_at":"2025-12-08T22:20:48.811618Z","closed_at":"2025-12-08T22:20:48.811618Z","dependencies":[{"issue_id":"phlo-o0q","depends_on_id":"phlo-db5","type":"blocks","created_at":"2025-12-08T22:12:25.103167Z","created_by":"daemon"},{"issue_id":"phlo-o0q","depends_on_id":"phlo-phy","type":"parent-child","created_at":"2025-12-08T22:12:42.22403Z","created_by":"daemon"}]}
{"id":"phlo-phy","title":"Services Architecture: Plugin-based service management","description":"Refactor services/ to use service.yaml definitions. Enable phlo services add/remove/list for flexible lakehouse composition.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-08T22:11:21.941304Z","updated_at":"2025-12-09T06:15:41.490454Z","closed_at":"2025-12-09T06:15:41.490454Z"}
{"id":"phlo-ps2","title":"Quality: Blocking vs warn policy","description":"Define and implement severity rules: Pandera contract blocks; dbt uniqueness/not_null/relationships block; drift/anomaly warn-only (tag-based).","design":"Severity policy (best practice):\n- Pandera contract checks: blocking failures.\n- dbt tests: blocking for not_null/unique/relationships; warn for tests tagged warn/anomaly.\n- Provide tag-based overrides (e.g. tag:warn, tag:blocking).\n\nOut of scope: alert routing (Slack/email).","acceptance_criteria":"- Severity mapping implemented and documented.\n- Tag-based override works for dbt tests.\n- Dagster shows WARN vs FAIL correctly; downstream blocking behavior matches policy.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T00:35:00.744717Z","updated_at":"2025-12-13T18:31:51.579969Z","closed_at":"2025-12-13T18:31:51.579969Z","dependencies":[{"issue_id":"phlo-ps2","depends_on_id":"phlo-emz","type":"parent-child","created_at":"2025-12-13T00:37:40.181719Z","created_by":"daemon"}]}
{"id":"phlo-pyg","title":"Observatory: Saved queries \u0026 views","description":"Persist saved SQL queries and table views (filters/sort/columns). Start with localStorage; define schema for later server-side persistence.","design":"Scope\n- Add saved queries and saved views in Observatory.\n- Saved query: a SQL snippet + connection/context + tags + optional parameters (e.g., partition date).\n- Saved view: a table + selected columns + filters + sort + pinned columns (UI state), stored separately from ad-hoc browsing.\n- Storage should be server-side and multi-user ready (Postgres in observatory service), not localStorage.\n- API should support list/search, create/update, delete, and run.","acceptance_criteria":"Done when\n- A user can save, edit, delete, and run a saved query.\n- A user can save a table view and restore it later (same filters/sort/pinned columns).\n- Saved items persist across browser refresh and server restarts.\n- Basic permissions model is defined (at least per-environment; per-user optional).","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-13T00:22:28.218378Z","updated_at":"2025-12-18T19:57:06.441153Z","closed_at":"2025-12-18T19:57:06.441153Z","dependencies":[{"issue_id":"phlo-pyg","depends_on_id":"phlo-4su","type":"blocks","created_at":"2025-12-13T00:22:41.108937Z","created_by":"daemon"},{"issue_id":"phlo-pyg","depends_on_id":"phlo-npw","type":"blocks","created_at":"2025-12-13T00:22:41.169233Z","created_by":"daemon"},{"issue_id":"phlo-pyg","depends_on_id":"phlo-emz","type":"parent-child","created_at":"2025-12-13T00:37:40.974102Z","created_by":"daemon"}]}
{"id":"phlo-qqm","title":"Observatory: Phase 2 - Graph and Lineage","description":"Interactive lineage visualization using React Flow. Includes: /graph route with zoomable graph, focused upstream/downstream views, impact analysis, column-level lineage from dbt manifest, cmdk command palette search.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-07T23:41:05.835731Z","updated_at":"2025-12-09T07:43:46.656839Z","closed_at":"2025-12-09T07:43:46.656839Z","dependencies":[{"issue_id":"phlo-qqm","depends_on_id":"phlo-8i3","type":"blocks","created_at":"2025-12-07T23:41:16.670499Z","created_by":"daemon"},{"issue_id":"phlo-qqm","depends_on_id":"phlo-8dl","type":"parent-child","created_at":"2025-12-13T00:39:01.450069Z","created_by":"daemon"}]}
{"id":"phlo-qqm.1","title":"Add impact analysis to graph view","description":"Show downstream impact when selecting an asset: which assets would be affected if this asset fails or changes","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T13:45:40.928698Z","updated_at":"2025-12-09T07:43:35.358185Z","closed_at":"2025-12-09T07:43:35.358185Z","dependencies":[{"issue_id":"phlo-qqm.1","depends_on_id":"phlo-qqm","type":"parent-child","created_at":"2025-12-08T13:45:40.930683Z","created_by":"daemon"}]}
{"id":"phlo-qqm.2","title":"Add column-level lineage from Dagster metadata","description":"Query Dagster for column-level lineage metadata from dbt manifest and display in asset detail/graph views","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T13:45:41.304496Z","updated_at":"2025-12-09T07:00:41.983724Z","closed_at":"2025-12-09T07:00:41.983724Z","dependencies":[{"issue_id":"phlo-qqm.2","depends_on_id":"phlo-qqm","type":"parent-child","created_at":"2025-12-08T13:45:41.305432Z","created_by":"daemon"}]}
{"id":"phlo-qx9","title":"Add Docker container status checking","description":"Check Docker API or docker compose ps to get running/stopped/unhealthy status for each service container","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-10T07:49:18.429427Z","updated_at":"2025-12-10T07:53:06.89148Z","closed_at":"2025-12-10T07:53:06.89148Z"}
{"id":"phlo-rml","title":"Observatory: Contributing rows pagination/sampling","description":"Add paging + sampling strategy for large contributor sets; configurable limit/strategy.","design":"Approach\n- Add a server endpoint that returns contributing source rows for a given target row (or aggregate bucket), with pagination.\n- Support two modes:\n  1) Entity mode: target row has a stable key -\u003e fetch matching source rows across stages.\n  2) Aggregate mode: target row represents a group -\u003e fetch sample of source rows that match the group predicates.\n- Enforce max rows per request; support deterministic sampling (seeded) for repeatability.\n- Return both rows and the SQL used (for audit/debug), plus a total count estimate when cheap.","acceptance_criteria":"Done when\n- Contributing rows API supports pagination and deterministic sampling.\n- Aggregate contributing rows do not claim a single source row; they return a set/sample.\n- Endpoint returns quickly with safe limits and timeouts.\n- Works end-to-end for at least one GitHub gold aggregate example.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T00:22:28.578076Z","updated_at":"2025-12-16T22:58:15.75619Z","closed_at":"2025-12-16T22:58:15.75619Z","dependencies":[{"issue_id":"phlo-rml","depends_on_id":"phlo-4su","type":"blocks","created_at":"2025-12-13T00:22:41.358632Z","created_by":"daemon"},{"issue_id":"phlo-rml","depends_on_id":"phlo-emz","type":"parent-child","created_at":"2025-12-13T00:37:40.800873Z","created_by":"daemon"}]}
{"id":"phlo-ruz","title":"Data Journey UX Improvements","description":"Collection of UX improvements for the Data Journey feature identified during review. Addresses issues with table selection, URL state, node detail display, table categorization, and fundamental row lineage visibility concerns.","design":"Scope\n- Improve the end-to-end \"data journey\" UX from a gold row back to its contributing source rows.\n- Standardize navigation: stage timeline (bronze -\u003e silver -\u003e gold -\u003e publish), each step shows query, sample rows, and checks.\n- Provide consistent \"why is this row here?\" entrypoints from tables, charts, and check failures.\n- Use shareable URLs so journeys can be linked in tickets.","acceptance_criteria":"Done when\n- From a gold table row, a user can navigate to the contributing rows experience reliably.\n- The UI shows stage context (what model produced it, what partition, what checks applied).\n- Journey views are linkable and reproducible via URL.\n- Works for GitHub example end-to-end.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-09T22:54:40.183772Z","updated_at":"2025-12-18T19:13:27.185605Z","closed_at":"2025-12-18T19:13:27.185605Z","dependencies":[{"issue_id":"phlo-ruz","depends_on_id":"phlo-2m5","type":"parent-child","created_at":"2025-12-09T22:54:51.105899Z","created_by":"daemon"},{"issue_id":"phlo-ruz","depends_on_id":"phlo-bcr","type":"parent-child","created_at":"2025-12-09T22:55:01.51567Z","created_by":"daemon"},{"issue_id":"phlo-ruz","depends_on_id":"phlo-dtf","type":"parent-child","created_at":"2025-12-09T22:55:12.540107Z","created_by":"daemon"},{"issue_id":"phlo-ruz","depends_on_id":"phlo-lx7","type":"parent-child","created_at":"2025-12-09T22:55:24.436934Z","created_by":"daemon"},{"issue_id":"phlo-ruz","depends_on_id":"phlo-st4","type":"parent-child","created_at":"2025-12-09T22:55:36.511579Z","created_by":"daemon"},{"issue_id":"phlo-ruz","depends_on_id":"phlo-g9c","type":"parent-child","created_at":"2025-12-09T22:55:51.346772Z","created_by":"daemon"},{"issue_id":"phlo-ruz","depends_on_id":"phlo-jmb","type":"parent-child","created_at":"2025-12-09T22:58:25.685422Z","created_by":"daemon"},{"issue_id":"phlo-ruz","depends_on_id":"phlo-ecv","type":"parent-child","created_at":"2025-12-09T22:58:43.221461Z","created_by":"daemon"},{"issue_id":"phlo-ruz","depends_on_id":"phlo-c2x","type":"parent-child","created_at":"2025-12-09T22:59:00.254759Z","created_by":"daemon"},{"issue_id":"phlo-ruz","depends_on_id":"phlo-1p9","type":"parent-child","created_at":"2025-12-09T22:59:16.496743Z","created_by":"daemon"},{"issue_id":"phlo-ruz","depends_on_id":"phlo-8dl","type":"parent-child","created_at":"2025-12-13T00:39:02.064413Z","created_by":"daemon"}]}
{"id":"phlo-st4","title":"Fix table layer miscategorization","description":"Issue #5: Tables are miscategorized - raw tables showing in bronze, marts showing in bronze instead of publish.\n\nROOT CAUSE: inferLayer() in iceberg.server.ts uses table name prefixes, but inferLayerFromSchema() should use schema name as primary source. The schema IS the layer (bronze/silver/gold/publish).\n\nACTION:\n- In getTables(), tables are assigned layer via inferLayerFromSchema(schema, tableName)\n- The schema name should be definitive: if schema='publish', layer='publish'\n- Remove fallback to inferLayer(tableName) when schema name clearly indicates layer\n- Check if raw schema tables are being loaded - they should map to bronze","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-09T22:55:33.112169Z","updated_at":"2025-12-09T23:06:59.648062Z","closed_at":"2025-12-09T23:06:59.648062Z"}
{"id":"phlo-wq1","title":"Observatory: Responsive/mobile layout","description":"Make Observatory UI responsive for tablet and mobile devices.","design":"Scope: Add responsive breakpoints. Collapsible sidebar on smaller screens. Touch-friendly controls. Test on common device sizes.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-19T23:21:41.7739Z","updated_at":"2025-12-19T23:34:41.272978Z","closed_at":"2025-12-19T23:34:41.272978Z","dependencies":[{"issue_id":"phlo-wq1","depends_on_id":"phlo-6mz","type":"blocks","created_at":"2025-12-19T23:21:41.775687Z","created_by":"daemon"}]}
{"id":"phlo-xre","title":"Quality: dbt test results -\u003e Dagster asset checks","description":"Translate dbt test execution results (run_results.json + manifest) into Dagster Asset Checks on the target assets. One check per dbt test + optional per-asset rollup.","design":"Translate dbt test results into Dagster Asset Checks.\n\nImplementation notes:\n- Parse dbt artifacts (run_results.json + manifest.json).\n- Create one Dagster check result per dbt test, associated to the tested asset.\n- Include compiled test SQL + failing count if available.\n- Partition context: include partition_key when dbt run was partitioned (partition_date_str).\n- Optional per-asset rollup check: dbt/summary.\n\nOut of scope: creating new dbt tests; this is surfacing results.","acceptance_criteria":"- Running partitioned dbt materialization yields Dagster asset checks for dbt tests.\n- Checks are attached to the correct assets and visible via Dagster GraphQL.\n- Metadata includes test name/type, SQL, and pass/fail status.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-13T00:35:00.437328Z","updated_at":"2025-12-14T10:55:54.819048Z","closed_at":"2025-12-14T10:55:54.819048Z","dependencies":[{"issue_id":"phlo-xre","depends_on_id":"phlo-ma0","type":"blocks","created_at":"2025-12-13T00:35:08.125528Z","created_by":"daemon"},{"issue_id":"phlo-xre","depends_on_id":"phlo-z43","type":"blocks","created_at":"2025-12-13T00:35:08.182784Z","created_by":"daemon"},{"issue_id":"phlo-xre","depends_on_id":"phlo-ps2","type":"blocks","created_at":"2025-12-13T00:35:08.247894Z","created_by":"daemon"},{"issue_id":"phlo-xre","depends_on_id":"phlo-emz","type":"parent-child","created_at":"2025-12-13T00:37:39.905991Z","created_by":"daemon"}]}
{"id":"phlo-xxr","title":"Create services.server.ts for service discovery API","description":"Server functions to list services from service.yaml, get enabled services from docker-compose, parse .env for credentials and ports","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-10T07:49:15.681808Z","updated_at":"2025-12-10T07:53:06.473104Z","closed_at":"2025-12-10T07:53:06.473104Z"}
{"id":"phlo-ydl","title":"Observatory: Phase 5 - Polish and Production","description":"Production-ready with advanced features. Includes: real-time polling updates, transformation browser, SQL viewer with Shiki, saved searches/favorites, mobile-responsive design, authentication.","design":"Scope\n- Hardening and polish: performance, reliability, and production readiness.\n- Add authn/authz (at least environment-level; per-user optional), mobile/responsive layout, and real-time updates (polling or SSE).\n- Improve developer ergonomics: better logging, error boundaries, and a consistent debugging workflow.\n- Add a SQL viewer with syntax highlighting and safe copy/export.\n- Ensure all user-facing state is shareable (URLs) and persisted (server-side).","acceptance_criteria":"Done when\n- Observatory is stable under typical dev workloads (no hangs; clear errors).\n- Auth is enabled and protects connections and saved artifacts.\n- UI is responsive on smaller screens.\n- Real-time updates work for materializations and check results.\n- All key pages have performance budgets and basic monitoring (logs/metrics).","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-07T23:41:11.735996Z","updated_at":"2025-12-19T23:20:58.175889Z","closed_at":"2025-12-19T23:20:58.175889Z","dependencies":[{"issue_id":"phlo-ydl","depends_on_id":"phlo-eh7","type":"blocks","created_at":"2025-12-07T23:41:16.816994Z","created_by":"daemon"},{"issue_id":"phlo-ydl","depends_on_id":"phlo-8dl","type":"parent-child","created_at":"2025-12-13T00:39:01.763156Z","created_by":"daemon"}]}
{"id":"phlo-yoh","title":"Create services/bi/superset/ with service.yaml","description":"Business intelligence service using standard Apache Superset image","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T22:11:57.310111Z","updated_at":"2025-12-08T22:19:17.936571Z","closed_at":"2025-12-08T22:19:17.936571Z","dependencies":[{"issue_id":"phlo-yoh","depends_on_id":"phlo-db5","type":"blocks","created_at":"2025-12-08T22:12:25.052751Z","created_by":"daemon"},{"issue_id":"phlo-yoh","depends_on_id":"phlo-phy","type":"parent-child","created_at":"2025-12-08T22:12:42.17306Z","created_by":"daemon"}]}
{"id":"phlo-z43","title":"Quality: Partition-scoped check conventions","description":"Define standard partition semantics for checks: partitioned assets run checks per partition by default; unpartitioned assets use rolling window unless full specified.","design":"Define partition semantics once so all check emitters behave the same.\n\nRules:\n- If asset is partitioned: checks run for the run partition by default.\n- If asset is unpartitioned: checks default to rolling window (e.g. last N days) unless explicitly full.\n- Partition column default: _phlo_partition_date (string YYYY-MM-DD) unless overridden.\n\nOut of scope: backfill orchestration (handled by jobs/backfill).","acceptance_criteria":"- Partition selection behavior documented.\n- Both Pandera and dbt check emitters include partition_key and apply correct partition scoping.\n- No check runs full-table by accident on partitioned assets.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-13T00:35:00.516831Z","updated_at":"2025-12-13T23:04:27.41749Z","closed_at":"2025-12-13T23:04:27.41749Z","dependencies":[{"issue_id":"phlo-z43","depends_on_id":"phlo-emz","type":"parent-child","created_at":"2025-12-13T00:37:40.10687Z","created_by":"daemon"}]}
