{"id":"phlo-0xu","title":"Create services/api/ with postgrest, hasura, fastapi service.yaml","description":"API layer services. Move existing fastapi code to services/api/fastapi/","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T22:11:57.241715Z","updated_at":"2025-12-08T22:20:48.758629Z","closed_at":"2025-12-08T22:20:48.758629Z","dependencies":[{"issue_id":"phlo-0xu","depends_on_id":"phlo-db5","type":"blocks","created_at":"2025-12-08T22:12:25.004144Z","created_by":"daemon"},{"issue_id":"phlo-0xu","depends_on_id":"phlo-phy","type":"parent-child","created_at":"2025-12-08T22:12:42.123287Z","created_by":"daemon"}]}
{"id":"phlo-13h","title":"Test new service architecture with github-stats example","description":"Verify phlo services init/start/stop work correctly with new plugin-based architecture","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T22:12:13.342806Z","updated_at":"2025-12-09T06:13:45.005182Z","closed_at":"2025-12-09T06:13:45.005182Z","dependencies":[{"issue_id":"phlo-13h","depends_on_id":"phlo-9y0","type":"blocks","created_at":"2025-12-08T22:12:33.292631Z","created_by":"daemon"},{"issue_id":"phlo-13h","depends_on_id":"phlo-phy","type":"parent-child","created_at":"2025-12-08T22:12:42.578568Z","created_by":"daemon"}]}
{"id":"phlo-1p9","title":"Add visual diff view between pipeline stages","description":"Show what changed between upstream and downstream data to make the journey more insightful.\n\nFEATURES:\n\n1. COLUMN DIFF:\n   - Side-by-side: upstream columns → downstream columns\n   - Highlight: added, removed, renamed, transformed columns\n   - Show transformation applied (e.g., 'DATE(created_at) → activity_date')\n\n2. VALUE DIFF:\n   - For 1:1 transforms, show before/after values\n   - Highlight changes: nulls filled, types converted, values computed\n   - e.g., 'created_at: 2024-01-01T10:30:00Z → activity_date: 2024-01-01'\n\n3. SCHEMA EVOLUTION:\n   - Compare column counts and types\n   - Show data reduction (10 cols → 5 cols)\n   - Show enrichment (join added 3 columns)\n\n4. AGGREGATE EXPLANATION:\n   - For GROUP BY transforms, show:\n     - Grouped by: [activity_date]\n     - Aggregated: COUNT(*) → total_events\n     - Source rows: ~150 rows → 1 row\n\n5. QUALITY ANNOTATIONS:\n   - Show if quality checks ran between stages\n   - Highlight rows that would fail checks\n\nFILES:\n- src/components/data/StageDiff.tsx (new component)\n- src/components/data/RowJourney.tsx (integrate diff view)","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-09T22:59:12.147735Z","updated_at":"2025-12-09T22:59:12.147735Z","dependencies":[{"issue_id":"phlo-1p9","depends_on_id":"phlo-ecv","type":"blocks","created_at":"2025-12-09T22:59:16.583506Z","created_by":"daemon"}]}
{"id":"phlo-2m5","title":"Remove Load Preview button - auto-load on table select","description":"Issue #1: Clicking a table in the sidebar should auto-load its preview data. The 'Load Preview' button is unnecessary friction.\n\nACTION: In DataPreview.tsx, add useEffect that triggers loadData(0) when the table prop changes, instead of showing the button.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T22:54:47.652096Z","updated_at":"2025-12-09T23:06:59.651869Z","closed_at":"2025-12-09T23:06:59.651869Z"}
{"id":"phlo-4r8","title":"Implement 'phlo services remove \u003cname\u003e' command","description":"Remove a service from lakehouse .phlo/ directory","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T22:12:06.743235Z","updated_at":"2025-12-09T06:15:34.468389Z","closed_at":"2025-12-09T06:15:34.468389Z","dependencies":[{"issue_id":"phlo-4r8","depends_on_id":"phlo-6qm","type":"blocks","created_at":"2025-12-08T22:12:33.240902Z","created_by":"daemon"},{"issue_id":"phlo-4r8","depends_on_id":"phlo-phy","type":"parent-child","created_at":"2025-12-08T22:12:42.529904Z","created_by":"daemon"}]}
{"id":"phlo-4wx","title":"Create services/core/ with service.yaml for postgres, minio, nessie, trino, dagster","description":"Core services always installed. Include Dockerfile and templates for dagster, catalog config for trino.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T22:11:44.330416Z","updated_at":"2025-12-08T22:18:43.543786Z","closed_at":"2025-12-08T22:18:43.543786Z","dependencies":[{"issue_id":"phlo-4wx","depends_on_id":"phlo-db5","type":"blocks","created_at":"2025-12-08T22:12:24.900011Z","created_by":"daemon"},{"issue_id":"phlo-4wx","depends_on_id":"phlo-phy","type":"parent-child","created_at":"2025-12-08T22:12:42.023022Z","created_by":"daemon"}]}
{"id":"phlo-5m2","title":"Remove legacy root docker-compose.yml and .env","description":"Remove broken framework-dev files with hardcoded credentials","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T22:11:37.109884Z","updated_at":"2025-12-08T22:14:44.855061Z","closed_at":"2025-12-08T22:14:44.855061Z","dependencies":[{"issue_id":"phlo-5m2","depends_on_id":"phlo-phy","type":"parent-child","created_at":"2025-12-08T22:12:41.866931Z","created_by":"daemon"}]}
{"id":"phlo-6qm","title":"Create src/phlo/services/ discovery module","description":"Module to discover and load service.yaml files from services/ directory. Parse YAML, validate schema, resolve dependencies.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T22:12:06.474015Z","updated_at":"2025-12-08T22:22:22.419211Z","closed_at":"2025-12-08T22:22:22.419211Z","dependencies":[{"issue_id":"phlo-6qm","depends_on_id":"phlo-db5","type":"blocks","created_at":"2025-12-08T22:12:25.224801Z","created_by":"daemon"},{"issue_id":"phlo-6qm","depends_on_id":"phlo-phy","type":"parent-child","created_at":"2025-12-08T22:12:42.325854Z","created_by":"daemon"}]}
{"id":"phlo-6z8","title":"Add enable/disable service functionality","description":"Server actions to start/stop Docker containers via docker compose up/down for individual services","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-10T07:49:22.301239Z","updated_at":"2025-12-10T07:55:11.361009Z","closed_at":"2025-12-10T07:55:11.361009Z","dependencies":[{"issue_id":"phlo-6z8","depends_on_id":"phlo-xxr","type":"blocks","created_at":"2025-12-10T07:49:54.117121Z","created_by":"daemon"}]}
{"id":"phlo-84h","title":"Create services/admin/pgweb/ with service.yaml","description":"Database admin tool","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T22:11:57.443209Z","updated_at":"2025-12-08T22:19:17.984781Z","closed_at":"2025-12-08T22:19:17.984781Z","dependencies":[{"issue_id":"phlo-84h","depends_on_id":"phlo-db5","type":"blocks","created_at":"2025-12-08T22:12:25.17375Z","created_by":"daemon"},{"issue_id":"phlo-84h","depends_on_id":"phlo-phy","type":"parent-child","created_at":"2025-12-08T22:12:42.274577Z","created_by":"daemon"}]}
{"id":"phlo-8a4","title":"Remove legacy services/dagster/","description":"Remove dagster config with hardcoded lake/lakepass credentials","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T22:11:37.175504Z","updated_at":"2025-12-08T22:16:40.242074Z","closed_at":"2025-12-08T22:16:40.242074Z","dependencies":[{"issue_id":"phlo-8a4","depends_on_id":"phlo-phy","type":"parent-child","created_at":"2025-12-08T22:12:41.91792Z","created_by":"daemon"}]}
{"id":"phlo-8i3","title":"Observatory: Phase 1 - Foundation","description":"TanStack Start scaffold with basic data display. Includes: project setup with routing, server functions for Dagster/Nessie integration, Dashboard, Asset List, Asset Detail pages, Docker integration. See specs/PHLO_OBSERVATORY_PLAN.md Phase 1.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-07T23:40:57.449811Z","updated_at":"2025-12-08T12:30:20.081837Z","closed_at":"2025-12-08T12:30:20.081837Z","dependencies":[{"issue_id":"phlo-8i3","depends_on_id":"phlo-mne","type":"blocks","created_at":"2025-12-07T23:44:09.455236Z","created_by":"daemon"}]}
{"id":"phlo-8i3.1","title":"Create /assets route with asset list","description":"Asset list page showing all Dagster assets. Includes search/filter, asset type/layer badges, last materialization time. Uses TanStack Table for virtualized list.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T12:21:35.979523Z","updated_at":"2025-12-08T12:29:45.017465Z","closed_at":"2025-12-08T12:29:45.017465Z","dependencies":[{"issue_id":"phlo-8i3.1","depends_on_id":"phlo-8i3","type":"parent-child","created_at":"2025-12-08T12:21:35.980448Z","created_by":"daemon"},{"issue_id":"phlo-8i3.1","depends_on_id":"phlo-8i3.4","type":"blocks","created_at":"2025-12-08T12:22:08.81381Z","created_by":"daemon"}]}
{"id":"phlo-8i3.2","title":"Create /assets/:id route with asset detail","description":"Asset detail page with schema view, basic metrics (row count, size, freshness), and lineage preview. Tabs for Overview, Schema, Quality (placeholder).","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T12:21:38.596476Z","updated_at":"2025-12-08T12:29:45.0668Z","closed_at":"2025-12-08T12:29:45.0668Z","dependencies":[{"issue_id":"phlo-8i3.2","depends_on_id":"phlo-8i3","type":"parent-child","created_at":"2025-12-08T12:21:38.598513Z","created_by":"daemon"},{"issue_id":"phlo-8i3.2","depends_on_id":"phlo-8i3.1","type":"blocks","created_at":"2025-12-08T12:22:08.967581Z","created_by":"daemon"}]}
{"id":"phlo-8i3.3","title":"Create nessie.server.ts for branch operations","description":"Nessie REST client server functions: getBranches(), getCurrentBranch(), getCommits(). Enables branch selector in header for future Phase 3.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T12:21:41.410207Z","updated_at":"2025-12-09T08:15:43.971646Z","closed_at":"2025-12-09T08:15:43.971646Z","dependencies":[{"issue_id":"phlo-8i3.3","depends_on_id":"phlo-8i3","type":"parent-child","created_at":"2025-12-08T12:21:41.411083Z","created_by":"daemon"}]}
{"id":"phlo-8i3.4","title":"Expand dagster.server.ts with asset queries","description":"Add getAssets() for list view and getAssetDetails(key) for detail view. Query asset metadata, schema, materializations from Dagster GraphQL.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T12:21:41.855738Z","updated_at":"2025-12-08T12:25:32.482984Z","closed_at":"2025-12-08T12:25:32.482984Z","dependencies":[{"issue_id":"phlo-8i3.4","depends_on_id":"phlo-8i3","type":"parent-child","created_at":"2025-12-08T12:21:41.858425Z","created_by":"daemon"}]}
{"id":"phlo-9hv","title":"Add service.yaml to services/observatory/","description":"Observatory already exists, just needs service.yaml definition","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T22:11:57.175709Z","updated_at":"2025-12-08T22:19:17.88878Z","closed_at":"2025-12-08T22:19:17.88878Z","dependencies":[{"issue_id":"phlo-9hv","depends_on_id":"phlo-db5","type":"blocks","created_at":"2025-12-08T22:12:24.952248Z","created_by":"daemon"},{"issue_id":"phlo-9hv","depends_on_id":"phlo-phy","type":"parent-child","created_at":"2025-12-08T22:12:42.073206Z","created_by":"daemon"}]}
{"id":"phlo-9y0","title":"Update services.py init command to use service discovery","description":"Replace embedded template strings with dynamic composition from service.yaml files","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T22:12:06.543111Z","updated_at":"2025-12-08T22:24:35.265868Z","closed_at":"2025-12-08T22:24:35.265868Z","dependencies":[{"issue_id":"phlo-9y0","depends_on_id":"phlo-6qm","type":"blocks","created_at":"2025-12-08T22:12:33.035498Z","created_by":"daemon"},{"issue_id":"phlo-9y0","depends_on_id":"phlo-4wx","type":"blocks","created_at":"2025-12-08T22:12:33.08842Z","created_by":"daemon"},{"issue_id":"phlo-9y0","depends_on_id":"phlo-phy","type":"parent-child","created_at":"2025-12-08T22:12:42.376905Z","created_by":"daemon"}]}
{"id":"phlo-bcr","title":"Fix table selection not updating preview","description":"Issue #2: Clicking one table then another doesn't update the preview. The DataPreview component keeps showing the old data.\n\nACTION: Add table name as a key to DataPreview component in index.tsx so React remounts it on table change, OR add useEffect in DataPreview to reset state and reload when table prop changes.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T22:54:57.5248Z","updated_at":"2025-12-09T23:06:59.654107Z","closed_at":"2025-12-09T23:06:59.654107Z"}
{"id":"phlo-c2a","title":"Create Hub route and ServiceCard component","description":"Create /hub route with grid of ServiceCard components showing name, description, status, actions, and credentials","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-10T07:49:20.441505Z","updated_at":"2025-12-10T07:55:10.795853Z","closed_at":"2025-12-10T07:55:10.795853Z","dependencies":[{"issue_id":"phlo-c2a","depends_on_id":"phlo-xxr","type":"blocks","created_at":"2025-12-10T07:49:52.435366Z","created_by":"daemon"},{"issue_id":"phlo-c2a","depends_on_id":"phlo-qx9","type":"blocks","created_at":"2025-12-10T07:49:53.846175Z","created_by":"daemon"}]}
{"id":"phlo-c2x","title":"Use primary keys and timestamps for smarter row matching","description":"Improve row matching by using table metadata to find the best columns for tracing.\n\nAPPROACH:\n\n1. DETECT KEY COLUMNS:\n   - Query Iceberg table metadata for primary keys\n   - Look for common patterns: id, _id, uuid, created_at, updated_at\n   - Identify columns that appear across multiple stages\n\n2. TIMESTAMP CORRELATION:\n   - If upstream has created_at and downstream has processed_at\n   - Use time proximity matching (within batch window)\n   - Track _dlt_load_id or similar batch identifiers from DLT\n\n3. COMMON COLUMN DETECTION:\n   - Find columns with same name across upstream/downstream\n   - Prioritize: IDs \u003e timestamps \u003e categorical \u003e numeric\n   - Weight by uniqueness (high cardinality = better for matching)\n\n4. SMART WHERE CLAUSE BUILDING:\n   - Use detected keys preferentially over parsed SQL mappings\n   - Fall back to SQL parsing for non-key columns\n   - Combine: WHERE id = X AND date = Y (multiple conditions)\n\n5. BATCH LINEAGE:\n   - Track _dlt_load_id propagation through transforms\n   - For aggregates, show 'From batch loaded at: 2024-01-01 10:00'\n   - Links to batch-level lineage when row-level isn't possible\n\nFILES:\n- src/server/iceberg.server.ts (add getTablePrimaryKeys)\n- src/utils/sqlParser.ts (add key column detection)\n- src/components/data/RowJourney.tsx (use smarter matching)","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-09T22:58:56.604062Z","updated_at":"2025-12-09T22:58:56.604062Z"}
{"id":"phlo-c5z","title":"Implement 'phlo services list' command","description":"Show available services, their status (installed/not), and profiles","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T22:12:06.610995Z","updated_at":"2025-12-08T22:24:35.320144Z","closed_at":"2025-12-08T22:24:35.320144Z","dependencies":[{"issue_id":"phlo-c5z","depends_on_id":"phlo-6qm","type":"blocks","created_at":"2025-12-08T22:12:33.139651Z","created_by":"daemon"},{"issue_id":"phlo-c5z","depends_on_id":"phlo-phy","type":"parent-child","created_at":"2025-12-08T22:12:42.427622Z","created_by":"daemon"}]}
{"id":"phlo-cpl","title":"Observatory: Hub Tab (Service Management)","description":"Add a Hub tab to Observatory for managing Phlo services - show status, enable/disable, Docker status, links, descriptions, and credentials from service.yaml and .env","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-10T07:49:05.31887Z","updated_at":"2025-12-10T07:57:01.21639Z","closed_at":"2025-12-10T07:57:01.21639Z","dependencies":[{"issue_id":"phlo-cpl","depends_on_id":"phlo-xxr","type":"parent-child","created_at":"2025-12-10T07:49:45.331162Z","created_by":"daemon"},{"issue_id":"phlo-cpl","depends_on_id":"phlo-qx9","type":"parent-child","created_at":"2025-12-10T07:49:46.686707Z","created_by":"daemon"},{"issue_id":"phlo-cpl","depends_on_id":"phlo-c2a","type":"parent-child","created_at":"2025-12-10T07:49:48.101583Z","created_by":"daemon"},{"issue_id":"phlo-cpl","depends_on_id":"phlo-6z8","type":"parent-child","created_at":"2025-12-10T07:49:49.546795Z","created_by":"daemon"},{"issue_id":"phlo-cpl","depends_on_id":"phlo-grx","type":"parent-child","created_at":"2025-12-10T07:49:51.05645Z","created_by":"daemon"}]}
{"id":"phlo-cxc","title":"Observatory: Data Provenance \u0026 Audit Trail","description":"Asset detail page showing complete data journey: materialization history, upstream/downstream lineage, transformation steps, quality checks, metadata. Query data with Trino, see how it got to be where it was.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-09T19:04:42.92997Z","updated_at":"2025-12-09T19:04:42.92997Z"}
{"id":"phlo-db5","title":"Define service.yaml schema specification","description":"Define the YAML schema for service definitions: name, description, default, profile, depends_on, build, compose, env_vars","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T22:11:29.330355Z","updated_at":"2025-12-08T22:15:59.870006Z","closed_at":"2025-12-08T22:15:59.870006Z","dependencies":[{"issue_id":"phlo-db5","depends_on_id":"phlo-phy","type":"parent-child","created_at":"2025-12-08T22:12:41.8135Z","created_by":"daemon"}]}
{"id":"phlo-dg9","title":"Implement 'phlo services add \u003cname\u003e' command","description":"Add a service to an existing lakehouse .phlo/ directory","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T22:12:06.677868Z","updated_at":"2025-12-09T06:15:33.614077Z","closed_at":"2025-12-09T06:15:33.614077Z","dependencies":[{"issue_id":"phlo-dg9","depends_on_id":"phlo-6qm","type":"blocks","created_at":"2025-12-08T22:12:33.189688Z","created_by":"daemon"},{"issue_id":"phlo-dg9","depends_on_id":"phlo-phy","type":"parent-child","created_at":"2025-12-08T22:12:42.478401Z","created_by":"daemon"}]}
{"id":"phlo-dtf","title":"URL-driven state for table selection and journey","description":"Issue #3: State should be URL-driven for shareability and browser navigation.\n\nACTION: \n- Change route from /data/ to /data/$schema/$table (TanStack Router file-based routing)\n- Create /data/$schema.$table/index.tsx route \n- Update TableBrowser to use navigate() instead of local state\n- Derive selectedTable from URL params\n- Add optional journeyRowId param for deep-linking to specific row journeys","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T22:55:09.093974Z","updated_at":"2025-12-09T23:06:59.655951Z","closed_at":"2025-12-09T23:06:59.655951Z"}
{"id":"phlo-ecv","title":"Show lineage confidence and transform type in UI","description":"Display how confident we are in the row lineage and what type of transform each node represents.\n\nUI CHANGES:\n\n1. NODE BADGES:\n   - '1:1' badge (green): Direct mapping, high confidence\n   - 'Group' badge (amber): GROUP BY detected, showing sample rows\n   - 'Complex' badge (red): Can't trace, show table-level only\n\n2. CONFIDENCE INDICATOR:\n   - Show percentage on journey panel header\n   - Tooltip explains what affects confidence\n   - e.g., 'Lineage confidence: 85% - 1:1 transforms detected'\n\n3. EDGE ANNOTATIONS:\n   - Show '1:N' or 'N:1' or '1:1' on edges between nodes\n   - Helps user understand data cardinality changes\n\n4. DATA PANEL MESSAGING:\n   Current: 'Data at this Stage'\n   Change to: \n   - 'Exact source row' (1:1 with key match)\n   - 'Contributing source rows (sample of N)' (aggregated)\n   - 'Related data (approximated)' (complex/uncertain)\n\n5. TOOLTIP ON UNCERTAINTY:\n   - 'Why approximate?' expandable section\n   - Lists: 'GROUP BY detected', 'No common key columns', etc.\n\nFILES: \n- src/components/data/RowJourney.tsx\n- src/utils/sqlParser.ts (add confidence calculation)","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-09T22:58:38.453543Z","updated_at":"2025-12-09T22:58:38.453543Z","dependencies":[{"issue_id":"phlo-ecv","depends_on_id":"phlo-jmb","type":"blocks","created_at":"2025-12-09T22:58:43.307018Z","created_by":"daemon"}]}
{"id":"phlo-eh7","title":"Observatory: Phase 4 - Data Preview + Quality Center","description":"See actual data, centralized quality management. Includes: paginated branch-aware data preview, column profiling, /quality dashboard, check results with trends, failure investigation with sample rows.","status":"in_progress","priority":3,"issue_type":"feature","created_at":"2025-12-07T23:41:11.282894Z","updated_at":"2025-12-09T19:04:42.3763Z","dependencies":[{"issue_id":"phlo-eh7","depends_on_id":"phlo-lsd","type":"blocks","created_at":"2025-12-07T23:41:16.771013Z","created_by":"daemon"}]}
{"id":"phlo-fvx","title":"Remove legacy services/hub/","description":"Remove deprecated hub landing page service","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T22:11:37.241518Z","updated_at":"2025-12-08T22:14:44.908999Z","closed_at":"2025-12-08T22:14:44.908999Z","dependencies":[{"issue_id":"phlo-fvx","depends_on_id":"phlo-phy","type":"parent-child","created_at":"2025-12-08T22:12:41.971388Z","created_by":"daemon"}]}
{"id":"phlo-g9c","title":"Reconsider row-level journey visualization approach","description":"Issue #6: Unclear if current approach truly shows data journey for a single row.\n\nCURRENT IMPLEMENTATION ANALYSIS:\nThe sqlParser.ts attempts row-level lineage via SQL reverse-engineering:\n1. parseColumnMappings() extracts SELECT clause column aliases and transformations\n2. buildUpstreamWhereClause() builds WHERE conditions using parsed mappings\n3. Aggregate functions (COUNT, SUM, etc.) are correctly skipped\n4. Handles DATE(), CAST() transformations\n\nLIMITATIONS FOUND:\n- Only parses basic SELECT...FROM pattern (line 29: /SELECT\\s+(.*?)\\s+FROM/is)\n- Doesn't handle CTEs (WITH clauses)\n- Doesn't handle subqueries\n- Doesn't handle window functions (ROW_NUMBER, LEAD, LAG)\n- extractSourceTables() only finds simple FROM/JOIN patterns (lines 201-216)\n- Can't trace through UNION/INTERSECT/EXCEPT\n- GROUP BY semantics: even non-aggregate columns represent groups of rows\n\nWHAT ACTUALLY HAPPENS:\nFor aggregated data (fct_daily_github_metrics):\n- User clicks row: activity_date='2024-01-01', total_events=150\n- Parser extracts: DATE(created_at) AS activity_date\n- Upstream query: SELECT * FROM stg_github_events WHERE DATE(created_at)='2024-01-01' LIMIT 10\n- Returns sample of ~10 rows that CONTRIBUTED to the aggregate\n- NOT the actual row lineage - fundamental mismatch\n\nOPTIONS:\nA) Honest messaging: Label as 'Contributing source rows' not 'Row lineage'\nB) Focus on 1:1 transforms only: stg_ tables tracing back to dlt_ tables work well\nC) Table-level + sample: Show asset lineage graph + sample upstream data\nD) Probabilistic filtering: Add timestamps/batch_ids for correlation\n\nRECOMMENDATION: Rename feature to 'Data Journey' (not row lineage). Show:\n- Asset-level lineage (already working)\n- 'Sample source data' panel with clear messaging about what it represents\n- Only claim row-level accuracy for non-aggregate 1:1 transforms","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-09T22:55:47.811871Z","updated_at":"2025-12-09T22:57:39.573498Z"}
{"id":"phlo-grx","title":"Add Hub nav item to sidebar","description":"Add Hub link to __root.tsx sidebar navigation with appropriate icon","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-10T07:49:22.879758Z","updated_at":"2025-12-10T07:56:38.993465Z","closed_at":"2025-12-10T07:56:38.993465Z"}
{"id":"phlo-jmb","title":"Improve SQL parser to handle more patterns","description":"Enhance sqlParser.ts to handle more SQL patterns for better row tracing accuracy.\n\nADDITIONS TO IMPLEMENT:\n\n1. CTE SUPPORT (WITH clauses):\n   - Extract CTE definitions before main SELECT\n   - Track column mappings through CTEs\n   - Regex: /WITH\\s+(\\w+)\\s+AS\\s*\\((.*?)\\)/gis\n\n2. WINDOW FUNCTIONS:\n   - Detect OVER() clauses and mark columns as 'windowed'\n   - For ROW_NUMBER/RANK, the underlying row data is still 1:1\n   - For LEAD/LAG, note offset relationship\n\n3. CASE EXPRESSIONS:\n   - Parse CASE WHEN...THEN...ELSE...END\n   - Extract source columns from conditions\n\n4. SUBQUERY DETECTION:\n   - Detect subqueries in FROM clause\n   - Mark as 'complex' and skip row-level tracing\n\n5. TRANSFORM TYPE CLASSIFICATION:\n   - ONE_TO_ONE: Simple SELECT, CAST, CASE, date formatting\n   - ONE_TO_MANY: Window functions with PARTITION\n   - MANY_TO_ONE: GROUP BY, DISTINCT, aggregates\n   - COMPLEX: Subqueries, CTEs, joins\n\n6. CONFIDENCE SCORE:\n   - Return confidence 0-100% based on:\n     - Parser fully understood SQL: +30%\n     - No aggregates: +30%\n     - No GROUP BY: +20%\n     - Has traceable key columns: +20%\n\nFILES: src/utils/sqlParser.ts","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T22:58:21.81117Z","updated_at":"2025-12-10T19:18:45.54017Z","closed_at":"2025-12-10T19:18:45.540178Z"}
{"id":"phlo-lsd","title":"Observatory: Phase 3 - Version Control (Nessie)","description":"Git-like data versioning interface. Includes: /branches with visual branch tree, commit history, branch comparison with schema diffs, time-travel data preview, create/merge branch UI.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-07T23:41:08.651543Z","updated_at":"2025-12-09T17:46:05.772751Z","closed_at":"2025-12-09T17:46:05.772751Z","dependencies":[{"issue_id":"phlo-lsd","depends_on_id":"phlo-qqm","type":"blocks","created_at":"2025-12-07T23:41:16.72128Z","created_by":"daemon"}]}
{"id":"phlo-lx7","title":"Move node details from inline expansion to detail panel below flow","description":"Issue #4: SQL and data in expanded React Flow nodes are hard to read because the nodes are the wrong place for dense information.\n\nACTION:\n- Add selectedNode state to RowJourney or parent component\n- Clicking a node sets selectedNode (instead of expanding inline)\n- Render a detail panel BELOW the React Flow component (like the existing 'Selected Row Data' panel)\n- Detail panel shows: Transformation SQL, Quality checks, Row data at that stage\n- Keep nodes small/simple, just showing asset name and type badge","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T22:55:20.956933Z","updated_at":"2025-12-09T23:06:59.657491Z","closed_at":"2025-12-09T23:06:59.657491Z"}
{"id":"phlo-mne","title":"Observatory: Phase 0 - Minimal Scaffold","description":"De-risk TanStack Start with minimal viable scaffold. Just dashboard route, one working server function, and Docker integration. Proves the stack before full Phase 1 scope.","status":"closed","priority":0,"issue_type":"feature","created_at":"2025-12-07T23:43:41.908505Z","updated_at":"2025-12-08T12:19:06.748884Z","closed_at":"2025-12-08T12:19:06.748884Z"}
{"id":"phlo-mne.1","title":"Scaffold TanStack Start project","description":"Initialize TanStack Start project in services/observatory. Setup vite.config.ts, tsconfig.json, package.json with core dependencies. Verify dev server runs.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T23:43:49.408962Z","updated_at":"2025-12-08T12:09:40.56915Z","closed_at":"2025-12-08T12:09:40.56915Z","dependencies":[{"issue_id":"phlo-mne.1","depends_on_id":"phlo-mne","type":"parent-child","created_at":"2025-12-07T23:43:49.409662Z","created_by":"daemon"}]}
{"id":"phlo-mne.2","title":"Create root layout and dashboard route","description":"Create __root.tsx with basic navigation shell and index.tsx for dashboard. Just static placeholder content to verify routing works.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T23:43:52.454021Z","updated_at":"2025-12-08T12:12:24.993198Z","closed_at":"2025-12-08T12:12:24.993198Z","dependencies":[{"issue_id":"phlo-mne.2","depends_on_id":"phlo-mne","type":"parent-child","created_at":"2025-12-07T23:43:52.454484Z","created_by":"daemon"},{"issue_id":"phlo-mne.2","depends_on_id":"phlo-mne.1","type":"blocks","created_at":"2025-12-07T23:44:06.528992Z","created_by":"daemon"}]}
{"id":"phlo-mne.3","title":"Implement Dagster health check server function","description":"Create dagster.server.ts with getHealthMetrics() server function. Fetch asset count, failed jobs, etc from Dagster GraphQL API. Prove server function pattern works.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T23:43:54.86727Z","updated_at":"2025-12-08T12:14:02.377179Z","closed_at":"2025-12-08T12:14:02.377179Z","dependencies":[{"issue_id":"phlo-mne.3","depends_on_id":"phlo-mne","type":"parent-child","created_at":"2025-12-07T23:43:54.869912Z","created_by":"daemon"},{"issue_id":"phlo-mne.3","depends_on_id":"phlo-mne.2","type":"blocks","created_at":"2025-12-07T23:44:06.58873Z","created_by":"daemon"}]}
{"id":"phlo-mne.4","title":"Wire dashboard to display live health metrics","description":"Update dashboard route to call Dagster server function and display real metrics. Add basic Tailwind styling for health cards.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T23:43:57.617136Z","updated_at":"2025-12-08T12:17:56.59178Z","closed_at":"2025-12-08T12:17:56.59178Z","dependencies":[{"issue_id":"phlo-mne.4","depends_on_id":"phlo-mne","type":"parent-child","created_at":"2025-12-07T23:43:57.622646Z","created_by":"daemon"},{"issue_id":"phlo-mne.4","depends_on_id":"phlo-mne.3","type":"blocks","created_at":"2025-12-07T23:44:06.64535Z","created_by":"daemon"}]}
{"id":"phlo-mne.5","title":"Docker integration for Observatory","description":"Create Dockerfile for Observatory service. Add to docker-compose.override.yml with proper networking to Dagster, Nessie, Trino. Verify works in containerized environment.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-07T23:43:58.142482Z","updated_at":"2025-12-08T12:19:05.462782Z","closed_at":"2025-12-08T12:19:05.462782Z","dependencies":[{"issue_id":"phlo-mne.5","depends_on_id":"phlo-mne","type":"parent-child","created_at":"2025-12-07T23:43:58.143497Z","created_by":"daemon"},{"issue_id":"phlo-mne.5","depends_on_id":"phlo-mne.4","type":"blocks","created_at":"2025-12-07T23:44:06.73387Z","created_by":"daemon"}]}
{"id":"phlo-o0q","title":"Create services/observability/ with prometheus, grafana, loki","description":"Monitoring stack with service.yaml and config files for each","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T22:11:57.377729Z","updated_at":"2025-12-08T22:20:48.811618Z","closed_at":"2025-12-08T22:20:48.811618Z","dependencies":[{"issue_id":"phlo-o0q","depends_on_id":"phlo-db5","type":"blocks","created_at":"2025-12-08T22:12:25.103167Z","created_by":"daemon"},{"issue_id":"phlo-o0q","depends_on_id":"phlo-phy","type":"parent-child","created_at":"2025-12-08T22:12:42.22403Z","created_by":"daemon"}]}
{"id":"phlo-phy","title":"Services Architecture: Plugin-based service management","description":"Refactor services/ to use service.yaml definitions. Enable phlo services add/remove/list for flexible lakehouse composition.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-08T22:11:21.941304Z","updated_at":"2025-12-09T06:15:41.490454Z","closed_at":"2025-12-09T06:15:41.490454Z"}
{"id":"phlo-qqm","title":"Observatory: Phase 2 - Graph and Lineage","description":"Interactive lineage visualization using React Flow. Includes: /graph route with zoomable graph, focused upstream/downstream views, impact analysis, column-level lineage from dbt manifest, cmdk command palette search.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-07T23:41:05.835731Z","updated_at":"2025-12-09T07:43:46.656839Z","closed_at":"2025-12-09T07:43:46.656839Z","dependencies":[{"issue_id":"phlo-qqm","depends_on_id":"phlo-8i3","type":"blocks","created_at":"2025-12-07T23:41:16.670499Z","created_by":"daemon"}]}
{"id":"phlo-qqm.1","title":"Add impact analysis to graph view","description":"Show downstream impact when selecting an asset: which assets would be affected if this asset fails or changes","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T13:45:40.928698Z","updated_at":"2025-12-09T07:43:35.358185Z","closed_at":"2025-12-09T07:43:35.358185Z","dependencies":[{"issue_id":"phlo-qqm.1","depends_on_id":"phlo-qqm","type":"parent-child","created_at":"2025-12-08T13:45:40.930683Z","created_by":"daemon"}]}
{"id":"phlo-qqm.2","title":"Add column-level lineage from Dagster metadata","description":"Query Dagster for column-level lineage metadata from dbt manifest and display in asset detail/graph views","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-08T13:45:41.304496Z","updated_at":"2025-12-09T07:00:41.983724Z","closed_at":"2025-12-09T07:00:41.983724Z","dependencies":[{"issue_id":"phlo-qqm.2","depends_on_id":"phlo-qqm","type":"parent-child","created_at":"2025-12-08T13:45:41.305432Z","created_by":"daemon"}]}
{"id":"phlo-qx9","title":"Add Docker container status checking","description":"Check Docker API or docker compose ps to get running/stopped/unhealthy status for each service container","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-10T07:49:18.429427Z","updated_at":"2025-12-10T07:53:06.89148Z","closed_at":"2025-12-10T07:53:06.89148Z"}
{"id":"phlo-ruz","title":"Data Journey UX Improvements","description":"Collection of UX improvements for the Data Journey feature identified during review. Addresses issues with table selection, URL state, node detail display, table categorization, and fundamental row lineage visibility concerns.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-09T22:54:40.183772Z","updated_at":"2025-12-09T22:54:40.183772Z","dependencies":[{"issue_id":"phlo-ruz","depends_on_id":"phlo-2m5","type":"parent-child","created_at":"2025-12-09T22:54:51.105899Z","created_by":"daemon"},{"issue_id":"phlo-ruz","depends_on_id":"phlo-bcr","type":"parent-child","created_at":"2025-12-09T22:55:01.51567Z","created_by":"daemon"},{"issue_id":"phlo-ruz","depends_on_id":"phlo-dtf","type":"parent-child","created_at":"2025-12-09T22:55:12.540107Z","created_by":"daemon"},{"issue_id":"phlo-ruz","depends_on_id":"phlo-lx7","type":"parent-child","created_at":"2025-12-09T22:55:24.436934Z","created_by":"daemon"},{"issue_id":"phlo-ruz","depends_on_id":"phlo-st4","type":"parent-child","created_at":"2025-12-09T22:55:36.511579Z","created_by":"daemon"},{"issue_id":"phlo-ruz","depends_on_id":"phlo-g9c","type":"parent-child","created_at":"2025-12-09T22:55:51.346772Z","created_by":"daemon"},{"issue_id":"phlo-ruz","depends_on_id":"phlo-jmb","type":"parent-child","created_at":"2025-12-09T22:58:25.685422Z","created_by":"daemon"},{"issue_id":"phlo-ruz","depends_on_id":"phlo-ecv","type":"parent-child","created_at":"2025-12-09T22:58:43.221461Z","created_by":"daemon"},{"issue_id":"phlo-ruz","depends_on_id":"phlo-c2x","type":"parent-child","created_at":"2025-12-09T22:59:00.254759Z","created_by":"daemon"},{"issue_id":"phlo-ruz","depends_on_id":"phlo-1p9","type":"parent-child","created_at":"2025-12-09T22:59:16.496743Z","created_by":"daemon"}]}
{"id":"phlo-st4","title":"Fix table layer miscategorization","description":"Issue #5: Tables are miscategorized - raw tables showing in bronze, marts showing in bronze instead of publish.\n\nROOT CAUSE: inferLayer() in iceberg.server.ts uses table name prefixes, but inferLayerFromSchema() should use schema name as primary source. The schema IS the layer (bronze/silver/gold/publish).\n\nACTION:\n- In getTables(), tables are assigned layer via inferLayerFromSchema(schema, tableName)\n- The schema name should be definitive: if schema='publish', layer='publish'\n- Remove fallback to inferLayer(tableName) when schema name clearly indicates layer\n- Check if raw schema tables are being loaded - they should map to bronze","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-09T22:55:33.112169Z","updated_at":"2025-12-09T23:06:59.648062Z","closed_at":"2025-12-09T23:06:59.648062Z"}
{"id":"phlo-xxr","title":"Create services.server.ts for service discovery API","description":"Server functions to list services from service.yaml, get enabled services from docker-compose, parse .env for credentials and ports","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-10T07:49:15.681808Z","updated_at":"2025-12-10T07:53:06.473104Z","closed_at":"2025-12-10T07:53:06.473104Z"}
{"id":"phlo-ydl","title":"Observatory: Phase 5 - Polish and Production","description":"Production-ready with advanced features. Includes: real-time polling updates, transformation browser, SQL viewer with Shiki, saved searches/favorites, mobile-responsive design, authentication.","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-07T23:41:11.735996Z","updated_at":"2025-12-07T23:41:11.735996Z","dependencies":[{"issue_id":"phlo-ydl","depends_on_id":"phlo-eh7","type":"blocks","created_at":"2025-12-07T23:41:16.816994Z","created_by":"daemon"}]}
{"id":"phlo-yoh","title":"Create services/bi/superset/ with service.yaml","description":"Business intelligence service using standard Apache Superset image","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-08T22:11:57.310111Z","updated_at":"2025-12-08T22:19:17.936571Z","closed_at":"2025-12-08T22:19:17.936571Z","dependencies":[{"issue_id":"phlo-yoh","depends_on_id":"phlo-db5","type":"blocks","created_at":"2025-12-08T22:12:25.052751Z","created_by":"daemon"},{"issue_id":"phlo-yoh","depends_on_id":"phlo-phy","type":"parent-child","created_at":"2025-12-08T22:12:42.17306Z","created_by":"daemon"}]}
