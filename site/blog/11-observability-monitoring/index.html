
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="Documentation for the Phlo data lakehouse platform" name="description"/>
<meta content="Phlo Team" name="author"/>
<link href="../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.7.1" name="generator"/>
<title>Part 11: Observability and Monitoringâ€”Knowing Your Pipeline - Phlo Lakehouse Platform</title>
<link href="../../assets/stylesheets/main.484c7ddc.min.css" rel="stylesheet"/>
<link href="../../assets/stylesheets/palette.ab4e12ef.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../../assets/_mkdocstrings.css" rel="stylesheet"/>
<script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body data-md-color-accent="indigo" data-md-color-primary="indigo" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#part-11-observability-and-monitoringknowing-your-pipeline">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Phlo Lakehouse Platform" class="md-header__button md-logo" data-md-component="logo" href="../.." title="Phlo Lakehouse Platform">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Phlo Lakehouse Platform
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Part 11: Observability and Monitoringâ€”Knowing Your Pipeline
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme)" data-md-color-primary="indigo" data-md-color-scheme="default" id="__palette_0" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"></path></svg>
</label>
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary="indigo" data-md-color-scheme="default" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_2" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
<input aria-label="Switch to system preference" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="indigo" data-md-color-scheme="slate" id="__palette_2" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Switch to system preference">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
</form>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<a aria-label="Share" class="md-search__icon md-icon" data-clipboard="" data-clipboard-text="" data-md-component="search-share" href="javascript:void(0)" tabindex="-1" title="Share">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"></path></svg>
</a>
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
<div class="md-search__suggest" data-md-component="search-suggest"></div>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Phlo Lakehouse Platform" class="md-nav__button md-logo" data-md-component="logo" href="../.." title="Phlo Lakehouse Platform">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
    Phlo Lakehouse Platform
  </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../..">
<span class="md-ellipsis">
    
  
    Home
  

    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../getting-started/installation/">
<span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../guides/developer-guide/">
<span class="md-ellipsis">
    
  
    Guides
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../setup/hasura/">
<span class="md-ellipsis">
    
  
    Setup
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../packages/">
<span class="md-ellipsis">
    
  
    Packages
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../reference/architecture/">
<span class="md-ellipsis">
    
  
    Reference
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../operations/operations-guide/">
<span class="md-ellipsis">
    
  
    Operations
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#the-observability-problem">
<span class="md-ellipsis">
      
        The Observability Problem
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#three-pillars-of-observability">
<span class="md-ellipsis">
      
        Three Pillars of Observability
      
    </span>
</a>
<nav aria-label="Three Pillars of Observability" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#1-metrics-numbers">
<span class="md-ellipsis">
      
        1. Metrics (Numbers)
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#2-logs-events">
<span class="md-ellipsis">
      
        2. Logs (Events)
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#3-traces-flows">
<span class="md-ellipsis">
      
        3. Traces (Flows)
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#phlos-observability-stack">
<span class="md-ellipsis">
      
        Phlo's Observability Stack
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#metrics-tracking-pipeline-health">
<span class="md-ellipsis">
      
        Metrics: Tracking Pipeline Health
      
    </span>
</a>
<nav aria-label="Metrics: Tracking Pipeline Health" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#viewing-metrics-via-cli">
<span class="md-ellipsis">
      
        Viewing Metrics via CLI
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#logs-structured-logging">
<span class="md-ellipsis">
      
        Logs: Structured Logging
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#alerting-getting-notified-when-things-break">
<span class="md-ellipsis">
      
        Alerting: Getting Notified When Things Break
      
    </span>
</a>
<nav aria-label="Alerting: Getting Notified When Things Break" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#configuring-alert-destinations">
<span class="md-ellipsis">
      
        Configuring Alert Destinations
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#managing-alerts-via-cli">
<span class="md-ellipsis">
      
        Managing Alerts via CLI
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#what-triggers-alerts">
<span class="md-ellipsis">
      
        What Triggers Alerts
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#alert-severity-levels">
<span class="md-ellipsis">
      
        Alert Severity Levels
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dashboards-visualizing-health">
<span class="md-ellipsis">
      
        Dashboards: Visualizing Health
      
    </span>
</a>
<nav aria-label="Dashboards: Visualizing Health" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#main-operations-dashboard">
<span class="md-ellipsis">
      
        Main Operations Dashboard
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#asset-health-dashboard">
<span class="md-ellipsis">
      
        Asset Health Dashboard
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#tracing-deep-debugging">
<span class="md-ellipsis">
      
        Tracing: Deep Debugging
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#monitoring-as-code">
<span class="md-ellipsis">
      
        Monitoring as Code
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#lineage-visualization-understanding-your-data-flow">
<span class="md-ellipsis">
      
        Lineage Visualization: Understanding Your Data Flow
      
    </span>
</a>
<nav aria-label="Lineage Visualization: Understanding Your Data Flow" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#why-lineage-matters">
<span class="md-ellipsis">
      
        Why Lineage Matters
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#viewing-lineage-from-cli">
<span class="md-ellipsis">
      
        Viewing Lineage from CLI
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#impact-analysis">
<span class="md-ellipsis">
      
        Impact Analysis
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#exporting-lineage">
<span class="md-ellipsis">
      
        Exporting Lineage
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#alerting-getting-notified-when-things-break_1">
<span class="md-ellipsis">
      
        Alerting: Getting Notified When Things Break
      
    </span>
</a>
<nav aria-label="Alerting: Getting Notified When Things Break" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#example-alert-format">
<span class="md-ellipsis">
      
        Example Alert Format
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#log-access-and-filtering">
<span class="md-ellipsis">
      
        Log Access and Filtering
      
    </span>
</a>
<nav aria-label="Log Access and Filtering" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#why-cli-logs">
<span class="md-ellipsis">
      
        Why CLI Logs?
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#filtering-options">
<span class="md-ellipsis">
      
        Filtering Options
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#real-time-tailing">
<span class="md-ellipsis">
      
        Real-Time Tailing
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#json-output-for-scripting">
<span class="md-ellipsis">
      
        JSON Output for Scripting
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#metrics-quantifying-pipeline-health">
<span class="md-ellipsis">
      
        Metrics: Quantifying Pipeline Health
      
    </span>
</a>
<nav aria-label="Metrics: Quantifying Pipeline Health" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#the-metrics-dashboard">
<span class="md-ellipsis">
      
        The Metrics Dashboard
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#per-asset-metrics">
<span class="md-ellipsis">
      
        Per-Asset Metrics
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#exporting-for-analysis">
<span class="md-ellipsis">
      
        Exporting for Analysis
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#summary">
<span class="md-ellipsis">
      
        Summary
      
    </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="part-11-observability-and-monitoringknowing-your-pipeline">Part 11: Observability and Monitoringâ€”Knowing Your Pipeline</h1>
<p>You've built a data lakehouse with validation and governance. But what happens at 3am when something breaks? This post covers observability: monitoring, alerting, and troubleshooting.</p>
<h2 id="the-observability-problem">The Observability Problem</h2>
<p>Without proper monitoring, failures hide:</p>
<pre><code>Tuesday 3am:
  â€¢ DLT fails to fetch from Nightscout API
  â€¢ Data stops flowing
  â€¢ Nobody notices

Wednesday 9am:
  â€¢ Users report: "Dashboard shows stale data"
  â€¢ Investigation: "Last update was 30 hours ago"
  â€¢ Impact: 500+ people using outdated metrics
  â€¢ Root cause: API timeout at 3:14am, log buried in Dagster logs
</code></pre>
<p>Observability solves this with:</p>
<pre><code>[Monitoring] â†’ Understand what's happening
[Alerting]   â†’ Get notified of problems
[Tracing]    â†’ Find root causes quickly
[Dashboards] â†’ Visualize pipeline health
</code></pre>
<h2 id="three-pillars-of-observability">Three Pillars of Observability</h2>
<h3 id="1-metrics-numbers">1. Metrics (Numbers)</h3>
<p>Track quantitative data:</p>
<pre><code>â€¢ Pipeline runtime: 5.2 seconds
â€¢ Data quality: 99.7% valid rows
â€¢ Row throughput: 12,500 rows/minute
â€¢ Freshness: 2 hours since last update
â€¢ API latency: 150ms average
</code></pre>
<h3 id="2-logs-events">2. Logs (Events)</h3>
<p>Track what happened and when:</p>
<pre><code>[2024-10-15 10:35:42] âœ“ dlt_glucose_entries started
[2024-10-15 10:35:45] âœ“ Fetched 487 rows from API
[2024-10-15 10:35:47] âœ“ Pandera validation: 487/487 rows valid
[2024-10-15 10:35:49] âš  2 rows with invalid device type (logged)
[2024-10-15 10:35:51] âœ“ Merged to Iceberg (487 inserts, 2 updates)
[2024-10-15 10:35:53] âœ“ dlt_glucose_entries succeeded
</code></pre>
<h3 id="3-traces-flows">3. Traces (Flows)</h3>
<p>Track execution paths:</p>
<pre><code>Request: dlt_glucose_entries asset materialization
â”œâ”€ Fetch from API (45ms)
â”‚  â”œâ”€ Auth (5ms)
â”‚  â””â”€ Network (40ms)
â”œâ”€ Pandera validation (12ms)
â”‚  â”œâ”€ Type checking (8ms)
â”‚  â””â”€ Constraint checking (4ms)
â”œâ”€ Merge to Iceberg (80ms)
â”‚  â”œâ”€ Read current snapshot (20ms)
â”‚  â”œâ”€ Merge operation (40ms)
â”‚  â””â”€ Write metadata (20ms)
â””â”€ Asset check (15ms)

Total: 152ms
</code></pre>
<h2 id="phlos-observability-stack">Phlo's Observability Stack</h2>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Application Layer           â”‚
â”‚  (Dagster, dbt, DLT)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“ (emits events)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phlo CLI &amp; Monitoring       â”‚
â”‚  â€¢ phlo logs                 â”‚
â”‚  â€¢ phlo metrics              â”‚
â”‚  â€¢ phlo lineage              â”‚
â”‚  â€¢ phlo alerts               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Storage &amp; Collection        â”‚
â”‚  â€¢ Dagster Event Log         â”‚
â”‚  â€¢ Metrics Collector         â”‚
â”‚  â€¢ Lineage Graph             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Alerting &amp; Notifications    â”‚
â”‚  â€¢ Slack Webhooks            â”‚
â”‚  â€¢ PagerDuty                 â”‚
â”‚  â€¢ Email                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h2 id="metrics-tracking-pipeline-health">Metrics: Tracking Pipeline Health</h2>
<p>Phlo provides built-in metrics collection through the <code>phlo metrics</code> CLI command and the metrics collector module.</p>
<h3 id="viewing-metrics-via-cli">Viewing Metrics via CLI</h3>
<p>The easiest way to check pipeline health:</p>
<pre><code class="language-bash"># View overall pipeline metrics
$ phlo metrics summary

Platform Metrics Summary

Runs (last 24h)
  Total:     288
  Success:   285 (98.96%)
  Failure:   3 (1.04%)

Data Volume
  Rows:      1.2M
  Bytes:     450 MB

Latency (seconds)
  p50:       0.32s
  p95:       0.85s
  p99:       1.20s

Assets
  Active:    12
  Success:   11
  Warning:   0
  Failure:   1
</code></pre>
<p>For per-asset details:</p>
<pre><code class="language-bash"># View metrics for specific asset
$ phlo metrics asset glucose_entries --runs 20

Metrics for glucose_entries
Metric              Value
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Last Run Status     success
Last Run Duration   5.20s
Average Duration    5.10s
Failure Rate        5.0%
Avg Rows/Run        498
Data Size           2.5 MB

Last 20 Runs
Run ID    Status   Duration  Rows
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
abc123    success  5.2s      487
def456    success  4.8s      512
ghi789    success  5.1s      495
</code></pre>
<p>Export metrics for external analysis:</p>
<pre><code class="language-bash"># Export to JSON
$ phlo metrics export --format json --period 7d --output metrics.json

# Export to CSV
$ phlo metrics export --format csv --period 30d --output metrics.csv
</code></pre>
<h2 id="logs-structured-logging">Logs: Structured Logging</h2>
<p>Use structured logs for easy searching:</p>
<pre><code class="language-python"># workflows/ingestion/dlt_assets.py
import structlog

logger = structlog.get_logger()


@asset
def dlt_glucose_entries(context) -&gt; None:
    """Ingest glucose entries with structured logging."""

    logger.info(
        "asset_started",
        asset_name="dlt_glucose_entries",
        timestamp=datetime.utcnow().isoformat(),
    )

    try:
        # Fetch API
        logger.info(
            "api_fetch_started",
            endpoint="https://api.nightscout.info/api/v1/entries",
            timeout_seconds=30,
        )

        response = fetch_from_api()

        logger.info(
            "api_fetch_success",
            rows_returned=len(response),
            response_time_ms=response.elapsed.total_seconds() * 1000,
        )

        # Validate
        logger.info(
            "validation_started",
            validator="pandera",
            schema="glucose_entries_v1",
        )

        validated = validate(response)
        invalid_count = len(response) - len(validated)

        logger.info(
            "validation_complete",
            total_rows=len(response),
            valid_rows=len(validated),
            invalid_rows=invalid_count,
            pass_rate=100.0 * len(validated) / len(response),
        )

        # Merge
        logger.info(
            "merge_started",
            table="raw.glucose_entries",
            rows_to_merge=len(validated),
            unique_key="_id",
        )

        result = merge_to_iceberg(validated)

        logger.info(
            "merge_complete",
            table="raw.glucose_entries",
            inserts=result["inserts"],
            updates=result["updates"],
            merge_time_ms=result["duration_ms"],
        )

        # Success
        logger.info(
            "asset_succeeded",
            asset_name="dlt_glucose_entries",
            total_time_ms=get_total_elapsed(),
        )

    except Exception as e:
        logger.exception(
            "asset_failed",
            asset_name="dlt_glucose_entries",
            error_type=type(e).__name__,
            error_message=str(e),
        )
        raise
</code></pre>
<p>In Grafana, search logs:</p>
<pre><code>{job="dagster"} | json | asset_name="dlt_glucose_entries" | status="success"

Last 24 hours:
â”œâ”€ 10/15 10:35 âœ“ Succeeded in 152ms
â”œâ”€ 10/15 10:30 âœ“ Succeeded in 145ms
â”œâ”€ 10/15 10:25 âœ“ Succeeded in 168ms
â”œâ”€ 10/15 10:20 âš  Succeeded in 1,240ms (slow)
â””â”€ 10/15 10:15 âœ“ Succeeded in 156ms
</code></pre>
<h2 id="alerting-getting-notified-when-things-break">Alerting: Getting Notified When Things Break</h2>
<p>Phlo includes a built-in alerting system that can send notifications to Slack, PagerDuty, and email.</p>
<h3 id="configuring-alert-destinations">Configuring Alert Destinations</h3>
<p>Set up alert destinations via environment variables:</p>
<pre><code class="language-bash"># Slack Integration
export PHLO_ALERT_SLACK_WEBHOOK="https://hooks.slack.com/services/T.../B.../xxx"
export PHLO_ALERT_SLACK_CHANNEL="#data-alerts"  # Optional

# PagerDuty Integration
export PHLO_ALERT_PAGERDUTY_KEY="your-integration-key"

# Email Integration
export PHLO_ALERT_EMAIL_SMTP_HOST="smtp.gmail.com"
export PHLO_ALERT_EMAIL_SMTP_PORT="587"
export PHLO_ALERT_EMAIL_SMTP_USER="alerts@yourcompany.com"
export PHLO_ALERT_EMAIL_SMTP_PASSWORD="your-password"
export PHLO_ALERT_EMAIL_RECIPIENTS="data-team@yourcompany.com,oncall@yourcompany.com"
</code></pre>
<h3 id="managing-alerts-via-cli">Managing Alerts via CLI</h3>
<p>Check alert system status:</p>
<pre><code class="language-bash">$ phlo alerts status

Alert System Status

Configured Destinations: 2
  â€¢ slack
  â€¢ email

Recent Alerts Sent: 5
Deduplication Window: 60 minutes
</code></pre>
<p>List configured destinations:</p>
<pre><code class="language-bash">$ phlo alerts list

Configured Alert Destinations
Name   Type              Status
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
slack  SlackDestination  âœ“ Ready
email  EmailDestination  âœ“ Ready
</code></pre>
<p>Test your alert configuration:</p>
<pre><code class="language-bash"># Send test alert to all destinations
$ phlo alerts test

âœ“ Test alert sent successfully! Check your configured alert destinations.

# Test specific destination
$ phlo alerts test --destination slack --severity critical
</code></pre>
<h3 id="what-triggers-alerts">What Triggers Alerts</h3>
<p>Phlo automatically sends alerts for:</p>
<ol>
<li><strong>Asset Failures</strong> - When materialization fails</li>
<li><strong>Quality Check Violations</strong> - When data quality checks fail</li>
<li><strong>SLA Breaches</strong> - When freshness or quality thresholds are exceeded</li>
</ol>
<h3 id="alert-severity-levels">Alert Severity Levels</h3>
<table>
<thead>
<tr>
<th>Severity</th>
<th>Description</th>
<th>Default Routing</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>INFO</strong></td>
<td>FYI notifications</td>
<td>Slack only</td>
</tr>
<tr>
<td><strong>WARNING</strong></td>
<td>Needs attention</td>
<td>Slack + Email</td>
</tr>
<tr>
<td><strong>ERROR</strong></td>
<td>Something failed</td>
<td>Slack + Email + PagerDuty (low urgency)</td>
</tr>
<tr>
<td><strong>CRITICAL</strong></td>
<td>Production impact</td>
<td>All channels + PagerDuty (high urgency)</td>
</tr>
</tbody>
</table>
<h2 id="dashboards-visualizing-health">Dashboards: Visualizing Health</h2>
<h3 id="main-operations-dashboard">Main Operations Dashboard</h3>
<pre><code>Phlo Data Pipeline - Operations Dashboard

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Pipeline Status â”‚  Data Freshness â”‚  Quality Score  â”‚
â”‚      âœ“ HEALTHY  â”‚      2.3 hours  â”‚    99.74%       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Asset Execution Times (last 24 hours)
â”œâ”€ dlt_glucose_entries:    150ms avg âœ“
â”œâ”€ stg_glucose_entries:    45ms avg âœ“
â”œâ”€ fct_glucose_readings:   320ms avg âœ“
â”œâ”€ mrt_glucose_readings:   85ms avg âœ“
â””â”€ publish_to_postgres:   1,240ms avg âš 

Data Quality Checks (pass rate)
â”œâ”€ glucose_range_check:         100% âœ“
â”œâ”€ glucose_freshness_check:     100% âœ“
â”œâ”€ no_duplicates:               100% âœ“
â”œâ”€ statistical_bounds_check:    99.9% âœ“
â””â”€ validation_pass_rate:        99.74% âœ“

Active Alerts
â”œâ”€ âš  publish_to_postgres running slow (1240ms vs 500ms avg)
â””â”€ â„¹ API latency slightly elevated (180ms vs 150ms avg)

Resource Utilization
â”œâ”€ Disk: 45% used (180 GB / 400 GB)
â”œâ”€ Memory: 62% used (10 GB / 16 GB)
â””â”€ MinIO lake bucket: 280 GB
</code></pre>
<h3 id="asset-health-dashboard">Asset Health Dashboard</h3>
<pre><code>Asset: fct_glucose_readings

Status:        âœ“ HEALTHY
Last Update:   2024-10-15 10:35:42 UTC (2.3 hours ago)
Owner:         data-platform-team
Layer:         Gold (Marts)
Row Count:     487,239

Execution Metrics (24 hours)
â”œâ”€ Total runs: 288
â”œâ”€ Success: 285 (98.96%)
â”œâ”€ Failures: 3 (1.04%)
â”œâ”€ Avg time: 320ms
â”œâ”€ P95 time: 580ms
â”œâ”€ P99 time: 950ms

Quality Checks
â”œâ”€ glucose_range_check:         âœ“ 487,239/487,239 valid
â”œâ”€ glucose_freshness_check:     âœ“ Latest: 2.3h ago
â”œâ”€ no_duplicates:               âœ“ 0 duplicates
â””â”€ statistical_bounds_check:    âš  2 outliers detected

Data Distribution
â”œâ”€ Mean: 150 mg/dL
â”œâ”€ Std Dev: 45 mg/dL
â”œâ”€ Min: 22 mg/dL
â”œâ”€ Max: 598 mg/dL
â””â”€ Nulls: 0 (0%)

Downstream Usage
â”œâ”€ mrt_glucose_readings (Gold) â†’ 100K reads/day
â”œâ”€ Superset Dashboard (Glucose Monitoring) â†’ 450 views/day
â””â”€ Alert: Low Glucose Detection â†’ 12 alerts/day avg
</code></pre>
<h2 id="tracing-deep-debugging">Tracing: Deep Debugging</h2>
<p>Use distributed tracing to understand slow operations:</p>
<pre><code class="language-python"># phlo/monitoring/tracing.py
from jaeger_client import Config
from opentelemetry import trace, metrics
from opentelemetry.exporter.jaeger.thrift import JaegerExporter
from contextlib import contextmanager


jaeger_exporter = JaegerExporter(
    agent_host_name="localhost",
    agent_port=6831,
)

tracer = trace.get_tracer(__name__)


@contextmanager
def trace_operation(operation_name: str, attributes: dict = None):
    """Context manager for tracing operations."""
    with tracer.start_as_current_span(operation_name) as span:
        if attributes:
            for key, value in attributes.items():
                span.set_attribute(key, value)
        yield span


# Usage in code
@asset
def dlt_glucose_entries(context):
    """Ingest with tracing."""

    with trace_operation("dlt_glucose_entries") as span:
        # Fetch
        with trace_operation("fetch_from_api") as fetch_span:
            fetch_span.set_attribute("endpoint", "nightscout_api")
            data = fetch_api()
            fetch_span.set_attribute("rows_fetched", len(data))

        # Validate
        with trace_operation("pandera_validation") as val_span:
            val_span.set_attribute("schema", "glucose_entries_v1")
            valid = validate(data)
            val_span.set_attribute("rows_valid", len(valid))

        # Merge
        with trace_operation("iceberg_merge") as merge_span:
            merge_span.set_attribute("table", "raw.glucose_entries")
            result = merge_to_iceberg(valid)
            merge_span.set_attribute("inserts", result["inserts"])
            merge_span.set_attribute("updates", result["updates"])
</code></pre>
<p>In Jaeger UI, you see:</p>
<pre><code>Trace: dlt_glucose_entries
Duration: 152ms

â”œâ”€ dlt_glucose_entries [0ms - 152ms] (main)
â”‚  â”œâ”€ fetch_from_api [0ms - 45ms]
â”‚  â”‚  â””â”€ http.request GET /api/v1/entries [5ms - 40ms]
â”‚  â”œâ”€ pandera_validation [50ms - 62ms]
â”‚  â”‚  â”œâ”€ type_checking [50ms - 55ms]
â”‚  â”‚  â””â”€ constraint_checking [55ms - 60ms]
â”‚  â””â”€ iceberg_merge [65ms - 152ms]
â”‚     â”œâ”€ read_snapshot [65ms - 85ms]
â”‚     â”œâ”€ merge_operation [85ms - 125ms]
â”‚     â””â”€ write_metadata [125ms - 152ms]
</code></pre>
<p>Click on any span to see:</p>
<ul>
<li>Start time and duration</li>
<li>Attributes (table name, row count, etc.)</li>
<li>Logs within that span</li>
<li>Errors or exceptions</li>
</ul>
<h2 id="monitoring-as-code">Monitoring as Code</h2>
<pre><code class="language-python"># phlo/monitoring/observability_assets.py
from dagster import asset, schedule


@asset(group_name="monitoring")
def freshness_dashboard(context):
    """Generate freshness dashboard."""
    queries = {
        "dlt_glucose_entries": """
            (time() - asset_last_update_timestamp{'asset'='dlt_glucose_entries'}) / 3600
        """,
        "fct_glucose_readings": """
            (time() - asset_last_update_timestamp{'asset'='fct_glucose_readings'}) / 3600
        """,
    }

    dashboard = create_grafana_dashboard(
        name="Data Freshness",
        panels=[
            create_gauge_panel(
                title=f"{asset} Age (hours)",
                query=query,
                thresholds={"warning": 2, "critical": 4},
            )
            for asset, query in queries.items()
        ],
    )

    context.log.info(f"âœ“ Created freshness dashboard: {dashboard.url}")


@asset(group_name="monitoring")
def sla_tracker(context):
    """Track SLA compliance."""
    slas = {
        "dlt_glucose_entries": {
            "freshness": "2 hours",
            "availability": "99.9%",
        },
        "fct_glucose_readings": {
            "freshness": "1 hour",
            "availability": "99.95%",
        },
    }

    for asset_name, sla in slas.items():
        record_sla_metric(asset_name, sla)
        context.log.info(f"âœ“ Updated SLA for {asset_name}")


@schedule(
    name="observability_updates",
    cron_schedule="* * * * *",  # Every minute
)
def update_observability():
    """Update monitoring dashboards and alerts."""
    return {}
</code></pre>
<h2 id="lineage-visualization-understanding-your-data-flow">Lineage Visualization: Understanding Your Data Flow</h2>
<p>One of the hardest questions in data engineering: "If I change this table, what breaks?"</p>
<p>Without lineage, you're guessing. With lineage, you know exactly what depends on what.</p>
<h3 id="why-lineage-matters">Why Lineage Matters</h3>
<pre><code>Scenario: You need to rename a column in glucose_entries

Without lineage:
  1. Grep through code looking for references
  2. Miss the dbt model that uses a different alias
  3. Deploy change
  4. Dashboard breaks in production
  5. 2am phone call

With lineage:
  1. Run: phlo lineage impact glucose_entries
  2. See all 6 downstream dependencies
  3. Update them first
  4. Deploy safely
</code></pre>
<h3 id="viewing-lineage-from-cli">Viewing Lineage from CLI</h3>
<p>The <code>phlo lineage</code> commands let you explore dependencies without opening a browser:</p>
<pre><code class="language-bash">$ phlo lineage show glucose_entries

glucose_entries
â”œâ”€â”€ [upstream]
â”‚   â””â”€â”€ (external) Nightscout API
â”‚       â””â”€â”€ Fetched via DLT rest_api
â””â”€â”€ [downstream]
    â””â”€â”€ stg_glucose_entries (dbt model)
        â””â”€â”€ fct_glucose_readings (dbt model)
            â”œâ”€â”€ mrt_glucose_readings (dbt model)
            â”‚   â””â”€â”€ publish_glucose_marts (Dagster asset)
            â”‚       â””â”€â”€ (external) Superset Dashboard
            â””â”€â”€ fct_daily_glucose_metrics (dbt model)
                â””â”€â”€ mrt_glucose_hourly_patterns (dbt model)
</code></pre>
<p>This tree shows your entire data flow: from API source through transformations to dashboards.</p>
<h3 id="impact-analysis">Impact Analysis</h3>
<p>Before making changes, check what's affected:</p>
<pre><code class="language-bash">$ phlo lineage impact glucose_entries

Impact Analysis: glucose_entries

Direct Dependencies (depth 1):
  â€¢ stg_glucose_entries (dbt) - 12 columns reference source

Transitive Dependencies (depth 2+):
  â€¢ fct_glucose_readings - 8 columns derived
  â€¢ fct_daily_glucose_metrics - aggregates from fact table

Publishing Impact:
  âš  mrt_glucose_readings â†’ PostgreSQL marts (used by Superset)
  âš  publish_glucose_marts â†’ External consumers

Total Impact:
  6 assets affected
  2 publishing endpoints
  1 external dashboard

Recommendation: Coordinate change with dashboard owners before deploying
</code></pre>
<h3 id="exporting-lineage">Exporting Lineage</h3>
<p>Generate lineage diagrams for documentation:</p>
<pre><code class="language-bash"># Graphviz DOT format
$ phlo lineage export --format dot --output lineage.dot
$ dot -Tpng lineage.dot -o lineage.png

# Mermaid format (for Markdown docs)
$ phlo lineage export --format mermaid --output lineage.md
</code></pre>
<p>The Mermaid output can be embedded directly in GitHub READMEs or Notion docs:</p>
<div class="mermaid">graph LR
    A[Nightscout API] --&gt; B[glucose_entries]
    B --&gt; C[stg_glucose_entries]
    C --&gt; D[fct_glucose_readings]
    D --&gt; E[mrt_glucose_readings]
    D --&gt; F[fct_daily_glucose_metrics]
    E --&gt; G[Superset Dashboard]
</div>
<hr/>
<h2 id="alerting-getting-notified-when-things-break_1">Alerting: Getting Notified When Things Break</h2>
<p>Dashboards are great, but you can't watch them 24/7. Alerting ensures you know about problems before your users do.</p>
<h3 id="example-alert-format">Example Alert Format</h3>
<p>When alerts are sent, they include context:</p>
<pre><code>ğŸ”´ Asset Materialization Failed

Asset: glucose_entries
Partition: 2024-01-15
Run ID: abc123-def456

Error: Connection timeout after 30s

Timestamp: 2024-01-15 10:35:42 UTC
</code></pre>
<p>The AlertManager automatically handles:</p>
<ul>
<li><strong>Deduplication</strong> - Same asset + same error = 1 alert per hour (configurable)</li>
<li><strong>Severity Routing</strong> - Routes to appropriate channels based on severity</li>
<li><strong>Context</strong> - Includes run ID, asset name, error details</li>
</ul>
<hr/>
<h2 id="log-access-and-filtering">Log Access and Filtering</h2>
<p>When something goes wrong, you need logs. The <code>phlo logs</code> command gives you fast access without diving into Docker or Dagster UI.</p>
<h3 id="why-cli-logs">Why CLI Logs?</h3>
<pre><code>Scenario: Dashboard is showing stale data

Without CLI logs:
  1. Open browser
  2. Navigate to Dagster UI
  3. Find the run
  4. Scroll through logs
  5. Try to filter
  6. Give up and grep Docker logs

With phlo logs:
  $ phlo logs --asset glucose_entries --level ERROR --since 1h

  [10:35:42] ERROR glucose_entries: Connection refused to nightscout.api
  [10:35:42] ERROR glucose_entries: Retry 3/3 failed, aborting
  [10:35:43] ERROR glucose_entries: Run failed after 45s
</code></pre>
<h3 id="filtering-options">Filtering Options</h3>
<pre><code class="language-bash"># By asset
phlo logs --asset glucose_entries

# By time
phlo logs --since 1h          # Last hour
phlo logs --since 30m         # Last 30 minutes
phlo logs --since 7d          # Last week

# By severity
phlo logs --level ERROR       # Errors only
phlo logs --level WARNING     # Warnings and above

# Combined filters
phlo logs --asset glucose_entries --level ERROR --since 2h

# By specific run
phlo logs --run-id abc123-def456

# By job (for scheduled jobs)
phlo logs --job daily_glucose_pipeline
</code></pre>
<h3 id="real-time-tailing">Real-Time Tailing</h3>
<p>Watch logs as they happen:</p>
<pre><code class="language-bash">$ phlo logs --follow

[10:35:40] INFO  glucose_entries: Starting materialization
[10:35:41] INFO  glucose_entries: Fetching from Nightscout API
[10:35:42] INFO  glucose_entries: Retrieved 487 entries
[10:35:43] INFO  glucose_entries: Validating with Pandera schema
[10:35:44] INFO  glucose_entries: Writing to Iceberg table
[10:35:45] INFO  glucose_entries: Materialization complete (5.2s)
^C  # Ctrl+C to stop
</code></pre>
<h3 id="json-output-for-scripting">JSON Output for Scripting</h3>
<p>Pipe logs to other tools:</p>
<pre><code class="language-bash"># Find all unique error messages in the last day
phlo logs --level ERROR --since 1d --json | \
  jq -r '.[] | .message' | \
  sort | uniq -c | sort -rn

# Export to file for analysis
phlo logs --asset glucose_entries --since 7d --json &gt; glucose_logs.json

# Grep for specific patterns
phlo logs --json | jq 'select(.message | contains("timeout"))'
</code></pre>
<hr/>
<h2 id="metrics-quantifying-pipeline-health">Metrics: Quantifying Pipeline Health</h2>
<p>Logs tell you what happened. Metrics tell you how well things are running over time.</p>
<h3 id="the-metrics-dashboard">The Metrics Dashboard</h3>
<pre><code class="language-bash">$ phlo metrics

Pipeline Health Dashboard (Last 24 Hours)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Overall Status: âœ“ HEALTHY

Runs:
  Total:     288
  Success:   285 (98.96%)
  Failed:    3 (1.04%)

Data Volume:
  Rows Processed:  1.2M
  Bytes Written:   450 MB

Latency:
  P50:   320ms
  P95:   850ms
  P99:   1.2s

Quality:
  Pass Rate:     99.74%
  Checks Run:    1,440
  Failures:      4

Active Alerts: 1
  âš  publish_to_postgres running slow (1.2s avg vs 500ms baseline)
</code></pre>
<h3 id="per-asset-metrics">Per-Asset Metrics</h3>
<p>Drill into specific assets:</p>
<pre><code class="language-bash">$ phlo metrics asset glucose_entries --runs 20

Asset: glucose_entries
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Last 20 Runs:
  Run ID          Time      Duration  Rows   Status
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  abc123          10:35     5.2s      487    âœ“
  def456          10:30     4.8s      512    âœ“
  ghi789          10:25     5.1s      495    âœ“
  ...
  xyz000          09:05     45.2s     0      âœ— (timeout)

Statistics:
  Success Rate:   95% (19/20)
  Avg Duration:   5.1s
  P95 Duration:   8.2s
  Avg Rows:       498

Trend:
  Duration: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” (stable)
  Failures: â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” (1 in window)
</code></pre>
<h3 id="exporting-for-analysis">Exporting for Analysis</h3>
<p>Export metrics for external tools (Grafana, spreadsheets, custom analysis):</p>
<pre><code class="language-bash"># CSV for spreadsheets
$ phlo metrics export --format csv --period 30d --output metrics.csv

# JSON for custom analysis
$ phlo metrics export --format json --period 7d | \
  python analyze_metrics.py
</code></pre>
<hr/>
<h2 id="summary">Summary</h2>
<p>Phlo's observability stack provides:</p>
<p><strong>Metrics</strong>: Track what's happening via <code>phlo metrics</code> (execution time, throughput, quality)
<strong>Logs</strong>: Understand why with <code>phlo logs</code> (structured logs, searchable, real-time tailing)
<strong>Lineage</strong>: Understand impact with <code>phlo lineage</code> (CLI visualization, export, impact analysis)
<strong>Alerts</strong>: Get notified via <code>phlo alerts</code> (Slack, PagerDuty, email with deduplication)</p>
<p>Combined, you have:</p>
<ul>
<li><strong>Visibility</strong>: Know your pipeline state at any time via CLI</li>
<li><strong>Reliability</strong>: Automated alerts detect failures before users do</li>
<li><strong>Speed</strong>: Find root causes in minutes with structured logs and lineage</li>
<li><strong>Confidence</strong>: Deploy with safety nets and impact analysis in place</li>
</ul>
<p>All accessible through simple CLI commands that integrate with your existing workflows.</p>
<p><strong>Next</strong>: <a href="../12-production-deployment/">Part 12: Production Deployment and Scaling</a></p>
<p>See you there!</p>
</article>
</div>
<script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.expand", "navigation.prune", "navigation.indexes", "content.tabs.link", "content.code.annotation", "content.code.copy", "content.code.select", "search.suggest", "search.highlight", "search.share"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
<script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
<script type="module">import mermaid from "https://unpkg.com/mermaid@10.4.0/dist/mermaid.esm.min.mjs";
mermaid.initialize({});</script></body>
</html>