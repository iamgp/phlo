name: openmetadata-elasticsearch
description: OpenMetadata search backend
category: catalog
default: false
profile: openmetadata

image: docker.elastic.co/elasticsearch/elasticsearch:8.11.4

compose:
  restart: unless-stopped
  environment:
    discovery.type: single-node
    ES_JAVA_OPTS: -Xms1024m -Xmx1024m
    xpack.security.enabled: "false"
  healthcheck:
    test:
      [
        "CMD",
        "sh",
        "-c",
        "curl -s http://localhost:9200/_cluster/health?pretty | grep status | grep -qE 'green|yellow'",
      ]
    interval: 15s
    timeout: 10s
    retries: 10
