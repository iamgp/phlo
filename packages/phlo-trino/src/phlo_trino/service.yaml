name: trino
description: Distributed SQL query engine for the data lake
category: core
default: true

image: trinodb/trino:${TRINO_VERSION:-467}

depends_on:
  - nessie
  - minio

compose:
  restart: unless-stopped
  environment:
    AWS_ACCESS_KEY_ID: ${MINIO_ROOT_USER:-minio}
    AWS_SECRET_ACCESS_KEY: ${MINIO_ROOT_PASSWORD:-minio123}
    AWS_REGION: us-east-1
    S3_ENDPOINT: http://minio:9000
    S3_PATH_STYLE_ACCESS: "true"
  ports:
    - "${TRINO_PORT:-8080}:8080"
  volumes:
    - ./trino/catalog:/etc/trino/catalog:ro
  healthcheck:
    test: ["CMD", "curl", "-f", "http://localhost:8080/v1/info"]
    interval: 10s
    timeout: 5s
    retries: 10
    start_period: 45s

env_vars:
  TRINO_VERSION:
    default: "467"
    description: Trino version
  TRINO_PORT:
    default: 8080
    description: Trino HTTP port

files:
  - source: catalog/iceberg.properties
    dest: trino/catalog/iceberg.properties
